# Frontend System Design: Data Table Component

## ğŸ“‹ Ğ’Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğµ

Ğ”Ğ¾Ğ±Ñ€Ğ¾ Ğ¿Ğ¾Ğ¶Ğ°Ğ»Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ½Ğ° ÑƒÑ€Ğ¾Ğº Ğ¿Ğ¾ **Component Design** Ğ´Ğ»Ñ Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´-Ğ¸Ğ½Ğ¶ĞµĞ½ĞµÑ€Ğ¾Ğ². Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ Ñ€Ğ°ÑÑĞ¼Ğ¾Ñ‚Ñ€Ğ¸Ğ¼ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑƒĞ½Ğ¸Ğ²ĞµÑ€ÑĞ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Data Table â€” Ğ¾Ğ´Ğ½Ñƒ Ğ¸Ğ· ÑĞ°Ğ¼Ñ‹Ñ… Ñ‡Ğ°ÑÑ‚Ñ‹Ñ… Ğ·Ğ°Ğ´Ğ°Ñ‡ Ğ½Ğ° Ğ¸Ğ½Ñ‚ĞµÑ€Ğ²ÑŒÑ Ğ² Facebook Ğ¸ Amazon.

### ğŸ”„ Component Design Focus

**ĞÑ‚Ğ»Ğ¸Ñ‡Ğ¸Ğµ Ğ¾Ñ‚ System Design:**
- ĞĞ• Ñ„Ğ¾ĞºÑƒÑ Ğ½Ğ° API ÑĞµÑ€Ğ²ĞµÑ€Ğ°
- ĞĞ• Ñ„Ğ¾ĞºÑƒÑ Ğ½Ğ° data entities Ğ¾Ñ‚ Ğ±ÑĞºĞµĞ½Ğ´Ğ°
- âœ… Ğ¤Ğ¾ĞºÑƒÑ Ğ½Ğ° **API ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ°** (props, methods, events)
- âœ… ĞšĞ°Ğº Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… Ğ¼ĞµÑÑ‚Ğ°Ñ… Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
- âœ… ĞšĞ°ÑÑ‚Ğ¾Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¸ Ñ€Ğ°ÑÑˆĞ¸Ñ€ÑĞµĞ¼Ğ¾ÑÑ‚ÑŒ

---

## ğŸ“ ĞŸĞ»Ğ°Ğ½ Component Design

1. âœ… **ĞĞ±Ñ‰Ğ¸Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ**
2. âœ… **Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ**
3. âœ… **ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ°**
4. âœ… **Props Design** â€” ĞºĞ»ÑÑ‡ĞµĞ²Ğ¾Ğµ!
5. âœ… **Event API Design**
6. âœ… **State Design**
7. âœ… **ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ**
8. âœ… **Extensibility** (Ğ Ğ°ÑÑˆĞ¸Ñ€ÑĞµĞ¼Ğ¾ÑÑ‚ÑŒ)
9. âœ… **Accessibility**

---

## 1. ğŸ“Œ ĞĞ±Ñ‰Ğ¸Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

### ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»:

**1. Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ Ñ€Ğ°Ğ·Ğ½Ñ‹Ğ¼Ğ¸ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ°Ğ¼Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…**
```
ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° out-of-the-box:
âœ… Date (Ğ´Ğ°Ñ‚Ğ°)
âœ… Number (Ñ‡Ğ¸ÑĞ»Ğ¾)
âœ… String (ÑÑ‚Ñ€Ğ¾ĞºĞ°)
âœ… Custom format (Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ğ¼ Ñ€ĞµĞ½Ğ´ĞµÑ€Ğ¾Ğ¼)
```

**2. ĞšĞ°ÑÑ‚Ğ¾Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…**
```
ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: Ğ Ğ°Ğ·Ğ½Ñ‹Ğµ Ñ‚Ğ¸Ğ¿Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ñ‚Ñ€ĞµĞ±ÑƒÑÑ‚ Ñ€Ğ°Ğ·Ğ½Ğ¾Ğ³Ğ¾ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ
Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ: User defines custom render function
```

**3. Ğ¡Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ¸ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ**
```
âœ… Sort by each column
âœ… Configurable sorting
âœ… Search by query
```

**4. Export (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)**
```
? Support export to CSV
(Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¹ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ²ÑŒÑĞµÑ€Ğ°)
```

---

## 2. ğŸ¯ Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

**1. Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ğ¼Ğ¸ Ğ´Ğ°Ñ‚Ğ°ÑĞµÑ‚Ğ°Ğ¼Ğ¸ â­**
```
ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ñ‚Ñ‹ÑÑÑ‡ ÑÑ‚Ñ€Ğ¾Ğº
ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ°!
```

**2. Multi-platform**
```
âœ… Wide range of devices
âœ… Mobile, tablets, desktop
âœ… Old devices support
```

**3. Accessibility**
```
âœ… Screen reader friendly
âœ… Keyboard navigation
```

**4. ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾ÑÑ‚ÑŒ**
```
âœ… Hide/show columns
âœ… Sortable/non-sortable columns
âœ… Custom column names
âœ… Custom comparators
```

**5. CSS API**
```
Styling capabilities
Custom themes
```

---

## 3. ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ°

### Mockup:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Column 1 â†• â”‚ Column 2 â†• â”‚ Column 3 â†•  â”‚ â† Headers (sortable)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Data 1      â”‚ 2024-01-01  â”‚ 123        â”‚
â”‚ Data 2      â”‚ 2024-01-02  â”‚ 456        â”‚
â”‚ Data 3      â”‚ 2024-01-03  â”‚ 789        â”‚
â”‚ ...         â”‚ ...         â”‚ ...        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ğ¢Ğ¸Ğ¿Ñ‹ ĞºĞ¾Ğ»Ğ¾Ğ½Ğ¾Ğº:
- String
- Date
- Number
- Custom (user-defined)
```

### Component Hierarchy:

```
DataTable (root)
â”œâ”€â”€ Header
â”‚   â””â”€â”€ ColumnHeader Ã— N
â”‚       â””â”€â”€ Sort indicator
â””â”€â”€ RowList
    â””â”€â”€ Row Ã— N
        â””â”€â”€ Column Ã— N
            â””â”€â”€ RenderItem (user-defined)
```

**ĞšĞ»ÑÑ‡ĞµĞ²Ğ¾Ğµ:** 
- `RenderItem` = Ğ·ĞµĞ»Ñ‘Ğ½Ñ‹Ğ¹ = Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ğ¹
- ĞĞ´Ğ°Ğ¿Ñ‚Ğ¸Ğ²Ğ½Ğ¾Ğµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ĞºĞ¾Ğ»Ğ¾Ğ½Ğ¾Ğº

---

## 4. ğŸ”Œ Props Design â€” ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§ĞĞ!

### TypeScript Interface:

```typescript
type DataTableProps<T extends object> = {
  // 1. Ğ’Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ (generic type!)
  data: T[];
  
  // 2. ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ»Ğ¾Ğ½Ğ¾Ğº
  columns: Column<T>[];
  
  // 3. ĞŸĞ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ
  pagination?: boolean;      // default: true
  pageSize?: number;         // default: 10
  
  // 4. ĞšĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ñ‹Ğ¹ CSS ĞºĞ»Ğ°ÑÑ
  className?: string;
  
  // 5. Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸/Ğ¿Ğ¾Ğ¸ÑĞºĞ°
  filterFunc?: (data: T[], query: string) => T[];
  searchFunc?: (data: T[], query: string) => T[];
};
```

### Column Descriptor:

```typescript
type Column<T> = {
  // 1. ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ¸
  name: string;
  
  // 2. Ğ¢Ğ¸Ğ¿ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
  type: 'string' | 'number' | 'date' | 'custom';
  
  // 3. Ğ¡Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°
  sortable?: boolean;        // default: true
  comparator?: (a: T, b: T) => number;  // Custom ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°
  
  // 4. Ğ’Ğ¸Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ
  hidden?: boolean;          // default: false
  
  // 5. Custom Ñ€ĞµĞ½Ğ´ĞµÑ€
  render?: (data: T) => HTMLElement;
  update?: (element: HTMLElement, data: T) => HTMLElement;
};
```

### Ğ—Ğ°Ñ‡ĞµĞ¼ `update` Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ?

```
Ğ‘ĞµĞ· update:
- Ğ£Ğ´Ğ°Ğ»ÑĞµĞ¼ ÑÑ‚Ğ°Ñ€Ñ‹Ğ¹ DOM ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚
- Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ Ğ½Ğ¾Ğ²Ñ‹Ğ¹
- Ğ’ÑÑ‚Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ² DOM
â†’ ĞœĞµĞ´Ğ»ĞµĞ½Ğ½Ğ¾! Reflow!

Ğ¡ update:
- ĞŸĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¹ DOM
- ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞµĞ¼ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
â†’ Ğ‘Ñ‹ÑÑ‚Ñ€Ğ¾!
```

---

## 5. ğŸ“¡ Event API Design

### Events:

```typescript
type DataTableEvent = 
  | 'cell-select'
  | 'row-select'
  | 'page-change';

interface DataTableAPI<T> {
  // Subscribe to events
  on(event: DataTableEvent, callback: Function): void;
  
  // Destroy table
  destroy(): void;
  
  // Re-initialize with new config
  initialize(props: DataTableProps<T>): void;
}
```

### Usage:

```typescript
const table = new DataTable({
  data: users,
  columns: userColumns
});

// Listen to events
table.on('cell-select', (cell) => {
  console.log('Selected:', cell.data);
});

table.on('page-change', (page) => {
  console.log('Page:', page);
});
```

---

## 6. ğŸ—„ï¸ State Design

### Internal State:

```typescript
interface DataTableState<T> {
  // 1. Ğ˜ÑÑ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
  data: T[];
  
  // 2. ĞÑ‚Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
  filteredData: T[];
  
  // 3. Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸
  sortColumns: Array<{
    columnIndex: number;
    direction: 'asc' | 'desc';
  }>;
  
  // 4. ĞšĞ¾Ğ»Ğ¾Ğ½ĞºĞ¸
  columns: Column<T>[];
  
  // 5. Event listeners
  listeners: Map<DataTableEvent, Function[]>;
  
  // 6. ĞŸĞ¾Ğ¸ÑĞº
  searchable: boolean;
  
  // 7. Ğ¡Ñ‚Ğ¸Ğ»Ğ¸
  className?: string;
  
  // 8. ĞŸĞ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ
  pagination: boolean;
  currentPage: number;
  pageSize: number;
  
  // 9. DOM ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ñ‹ (Ğ´Ğ»Ñ Ğ¿ĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ!)
  elements: HTMLElement[];
}
```

### Data Flow:

```
Input Data + Columns
    â†“
Store in State
    â†“
Header â† columns[]
    â†“ Generate ColumnHeader Ã— N
    â†“
RowList â† data[]
    â†“ Generate Row Ã— N (Ğ¿Ğ¾ pageSize)
    â†“
Column â† datum + columnIndex
    â†“
RenderItem(datum[columnIndex])
```

**ĞšĞ»ÑÑ‡ĞµĞ²Ğ¾Ğµ:** 
- `columnIndex` = Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ Ğ² Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğµ (ÑƒĞ¿Ñ€Ğ¾Ñ‰ĞµĞ½Ğ¸Ğµ)
- ĞœĞ¾Ğ¶Ğ½Ğ¾ ÑƒÑĞ»Ğ¾Ğ¶Ğ½Ğ¸Ñ‚ÑŒ Ñ‡ĞµÑ€ĞµĞ· `key` Ğ² Column descriptor

---

## 7. âš¡ ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

### A. Network Performance

**1. Asset Compression**
```
âœ… Gzip + Brotli
```

**2. Bundle Targets**
```javascript
// ES6 bundle (modern browsers)
// - No polyfills
// - Smaller size
// - Chromium-based apps

// ES5 bundle (old browsers)
// - With polyfills
// - Bigger size
```

**3. Limit JS Features**
```
ĞœĞµĞ½ÑŒÑˆĞµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ñ„Ğ¸Ñ‡
â†’ ĞœĞµĞ½ÑŒÑˆĞµ Ğ¿Ğ¾Ğ»Ğ¸Ñ„Ğ¸Ğ»Ğ»Ğ¾Ğ² Ğ² ES5 bundle
```

**4. Modular Bundles**
```
@company/data-table/core
@company/data-table/utils
@company/data-table/themes

Import only what you need!
```

**5. Minify & CDN**
```
âœ… Minify CSS/JS
âœ… Serve from CDN
```

---

### B. Rendering Performance (DOM) â­

**1. Pagination > Virtualization**
```
Ğ”Ğ»Ñ data table:
âŒ Virtualization (Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾ÑÑ‚Ñ‹Ñ… ÑĞ¿Ğ¸ÑĞºĞ¾Ğ²)
âœ… Pagination (Ğ´Ğ»Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…)

ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ:
- ĞÑƒĞ¶Ğ½Ğ¾ Ğ·Ğ½Ğ°Ñ‚ÑŒ Ñ‚Ğ¾Ñ‡Ğ½ÑƒÑ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ
- Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
- ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¾Ğ¶Ğ¸Ğ´Ğ°ĞµÑ‚ Ğ½Ğ¾Ğ¼ĞµÑ€Ğ° ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†
```

**2. Constant Number of Nodes â­**
```
ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°:
1000 rows â†’ 1000 DOM nodes â†’ ĞœĞ•Ğ”Ğ›Ğ•ĞĞĞ!

Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:
pageSize = 10 â†’ Always 10 DOM nodes

ĞœĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼:
- Create 10 nodes once
- Store in state.elements
- Update data only (no delete/insert)
```

**3. Reuse DOM via Update Function â­**
```typescript
// âŒ ĞŸĞ»Ğ¾Ñ…Ğ¾: Remove + Create
rows.forEach(row => {
  row.remove();                    // Expensive!
  const newRow = renderRow(data);
  container.appendChild(newRow);   // Expensive!
});

// âœ… Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ¾: Update existing
state.elements.forEach((element, index) => {
  const newData = filteredData[index];
  
  if (column.update) {
    column.update(element, newData);  // Just update!
  } else {
    element = column.render(newData);
  }
});
```

**ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ ÑÑ‚Ğ¾ Ğ²Ğ°Ğ¶Ğ½Ğ¾:**
```
Remove + Insert:
- Triggers reflow
- Memory allocation
- Style recalculation

Update:
- No reflow
- Same nodes
- Just data change
â†’ 10x faster!
```

**4. Predefined Update Functions**
```typescript
// Ğ”Ğ»Ñ ÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ñ‹Ñ… Ñ‚Ğ¸Ğ¿Ğ¾Ğ²
const updates = {
  string: (el, data) => { el.textContent = data; },
  number: (el, data) => { el.textContent = data.toFixed(2); },
  date: (el, data) => { el.textContent = data.toLocaleDateString(); }
};
```

---

### C. CSS Optimization

**1. CSS Naming Convention (BEM)**
```css
/* âŒ Nested selectors */
.table .header .column .text { }

/* âœ… Flat selectors */
.table__column-text { }
```

**2. CSS Animations (not JS)**
```css
/* GPU-accelerated */
.table__row:hover {
  transform: translateY(-2px);
}
```

**3. Placeholders**
```
Loading state:
[â–ˆâ–ˆâ–ˆâ–ˆ] [â–ˆâ–ˆâ–ˆâ–ˆ] [â–ˆâ–ˆâ–ˆâ–ˆ]
[â–ˆâ–ˆ  ] [â–ˆâ–ˆâ–ˆâ–ˆ] [â–ˆâ–ˆ  ]

ĞŸÑĞ¸Ñ…Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ: ĞšĞ°Ğ¶ĞµÑ‚ÑÑ Ğ±Ñ‹ÑÑ‚Ñ€ĞµĞµ!
```

---

### D. JavaScript Performance

**1. Do Stuff Asynchronously**
```
ĞĞµ Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€ÑƒĞµĞ¼ UI thread!
```

**2. Web Workers Ğ´Ğ»Ñ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸ â­**
```typescript
// ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: 10,000 rows â†’ UI lag

// Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ: Filter in Worker
const worker = new Worker('filter.worker.js');

worker.postMessage({
  data: largeDataset,
  query: 'search term'
});

worker.onmessage = (e) => {
  const filtered = e.data;
  updateTable(filtered);
};
```

**3. Server-Side Filtering**
```typescript
// Ğ•ÑĞ»Ğ¸ filterFunc Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Promise
if (isPromise(filterFunc)) {
  // Server-side filtering
  const results = await filterFunc(query);
} else {
  // Client-side (use Web Worker)
  const results = await workerFilter(data, query);
}
```

**4. Event Delegation â­**
```typescript
// âŒ ĞŸĞ»Ğ¾Ñ…Ğ¾: Listener Ğ½Ğ° ĞºĞ°Ğ¶Ğ´ÑƒÑ ÑÑ‡ĞµĞ¹ĞºÑƒ
cells.forEach(cell => {
  cell.addEventListener('click', handleClick);
});
// 1000 cells = 1000 listeners = Memory leak!

// âœ… Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ¾: ĞĞ´Ğ¸Ğ½ listener Ğ½Ğ° Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñƒ
table.addEventListener('click', (e) => {
  const cell = e.target.closest('[data-row][data-col]');
  if (cell) {
    const row = cell.dataset.row;
    const col = cell.dataset.col;
    handleCellClick(row, col);
  }
});
// 1 listener Ğ´Ğ»Ñ Ğ²ÑĞµĞ¹ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹!
```

---

## 8. ğŸ”§ Extensibility (Ğ Ğ°ÑÑˆĞ¸Ñ€ÑĞµĞ¼Ğ¾ÑÑ‚ÑŒ)

### Ğ¡Ğ¿Ğ¾ÑĞ¾Ğ±Ñ‹ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ñ:

**1. CSS API**
```typescript
<DataTable 
  className="custom-theme"
  columns={[
    { name: 'User', className: 'user-column' }
  ]}
/>
```

**2. Custom Render Functions**
```typescript
columns: [
  {
    name: 'Avatar',
    type: 'custom',
    render: (user) => {
      const div = document.createElement('div');
      div.innerHTML = `<img src="${user.avatar}" />`;
      return div;
    },
    update: (element, user) => {
      element.querySelector('img').src = user.avatar;
    }
  }
]
```

**3. ES6 Inheritance**
```typescript
class CustomDataTable extends DataTable {
  // Extend functionality
  addExportButton() { ... }
  customSort() { ... }
}
```

---

## 9. â™¿ Accessibility

### A. Use `<table>` Tags â­

```html
<!-- âœ… Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ¾: Semantic HTML -->
<table>
  <thead>
    <tr>
      <th scope="col">Name</th>
      <th scope="col">Age</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>John</td>
      <td>25</td>
    </tr>
  </tbody>
</table>

<!-- âŒ ĞŸĞ»Ğ¾Ñ…Ğ¾: Div soup -->
<div class="table">
  <div class="row">
    <div class="cell">John</div>
  </div>
</div>
```

**ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ `<table>`?**
```
âœ… SEO optimization (Google Ğ¿Ğ°Ñ€ÑĞ¸Ñ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ)
âœ… Screen reader friendly (Ğ²ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ğ°Ñ ÑĞµĞ¼Ğ°Ğ½Ñ‚Ğ¸ĞºĞ°)
âœ… Accessibility Ğ¸Ğ· ĞºĞ¾Ñ€Ğ¾Ğ±ĞºĞ¸
âŒ Divs Ñ‚Ñ€ĞµĞ±ÑƒÑÑ‚ Ğ¼Ğ½Ğ¾Ğ³Ğ¾ ARIA Ğ°Ñ‚Ñ€Ğ¸Ğ±ÑƒÑ‚Ğ¾Ğ²
```

---

### B. Use REMs

```css
/* ĞĞ´Ğ°Ğ¿Ñ‚Ğ°Ñ†Ğ¸Ñ Ğº browser zoom */
.table {
  font-size: 1rem;
  padding: 0.5rem;
}
```

---

### C. Keyboard Navigation

```
ĞŸĞ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ Ñ <table>:
âœ… Tab: Navigate cells
âœ… Arrow keys: Move between cells

Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾:
- Ctrl+F: Search shortcut
- Ctrl+S: Filter shortcut
```

---

### D. ARIA Attributes

```html
<table 
  role="grid"
  aria-label="User data table"
>
  <th 
    scope="col"
    aria-sort="ascending"
  >
    Name
  </th>
  
  <td 
    role="gridcell"
    aria-label="User name: John"
  >
    John
  </td>
</table>
```

---

## ğŸ“Š Ğ˜Ñ‚Ğ¾Ğ³Ğ¾Ğ²Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         DataTable Component             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  Props<T>:                              â”‚
â”‚  - data: T[]                            â”‚
â”‚  - columns: Column<T>[]                 â”‚
â”‚  - pagination, pageSize                 â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  State:                                 â”‚
â”‚  - filteredData                         â”‚
â”‚  - sortColumns                          â”‚
â”‚  - elements[] (reused!)                 â”‚
â”‚  - currentPage                          â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  DOM (Constant pageSize nodes):         â”‚
â”‚  <table>                                â”‚
â”‚    <thead>                              â”‚
â”‚      <tr>                               â”‚
â”‚        <th> Ã— columns.length            â”‚
â”‚    <tbody>                              â”‚
â”‚      <tr> Ã— pageSize (e.g. 10)          â”‚
â”‚        <td> Ã— columns.length            â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  Events:                                â”‚
â”‚  - cell-select                          â”‚
â”‚  - row-select                           â”‚
â”‚  - page-change                          â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ²Ñ‹Ğ²Ğ¾Ğ´Ñ‹

### 1. **Generic Type `<T>`**
```typescript
// Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ Ğ»ÑĞ±Ñ‹Ğ¼Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸
data: T[]
columns: Column<T>[]
```

### 2. **Pagination > Virtualization**
```
Ğ”Ğ»Ñ Data Table:
âœ… Pagination (ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ)
âŒ Virtualization (Ğ´Ğ»Ñ ÑĞ¿Ğ¸ÑĞºĞ¾Ğ²)
```

### 3. **Reuse DOM â­**
```
Create once â†’ Store â†’ Update only
= 10x performance boost
```

### 4. **Event Delegation**
```
1 listener Ğ½Ğ° Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñƒ
vs
N listeners Ğ½Ğ° ÑÑ‡ĞµĞ¹ĞºĞ¸
= Memory efficient
```

### 5. **Semantic HTML (`<table>`)**
```
âœ… SEO
âœ… Accessibility
âœ… Screen readers
```

### 6. **Web Workers Ğ´Ğ»Ñ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸**
```
Large dataset â†’ Worker
= No UI blocking
```

---

## ğŸ¯ Component Design Checklist

**âœ… Props Design:**
- Generic types
- Column descriptors
- Custom render/update functions

**âœ… State Design:**
- Internal state
- DOM elements caching
- Event listeners

**âœ… Performance:**
- Pagination (constant nodes)
- Reuse DOM
- Event delegation
- Web Workers

**âœ… Accessibility:**
- Semantic `<table>`
- Keyboard navigation
- ARIA attributes
- REMs

**âœ… Extensibility:**
- CSS API
- Custom renders
- Inheritance

---

**Ğ’Ñ€ĞµĞ¼Ñ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ:** ~45 Ğ¼Ğ¸Ğ½ÑƒÑ‚  
**Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ:** Senior Frontend Engineer  
**ĞšĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸:** Facebook, Amazon, Google

Ğ£Ğ´Ğ°Ñ‡Ğ¸ Ğ½Ğ° Ğ¸Ğ½Ñ‚ĞµÑ€Ğ²ÑŒÑ! ğŸ“ŠğŸš€