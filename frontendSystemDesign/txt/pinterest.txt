# Frontend System Design: Pinterest (Masonry Layout)

## ğŸ“‹ Ğ’Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğµ

Ğ”Ğ¾Ğ±Ñ€Ğ¾ Ğ¿Ğ¾Ğ¶Ğ°Ğ»Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ½Ğ° ÑƒÑ€Ğ¾Ğº Ğ¿Ğ¾ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ğ¾Ğ¼Ñƒ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½Ñƒ Ğ´Ğ»Ñ Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´-Ğ¸Ğ½Ğ¶ĞµĞ½ĞµÑ€Ğ¾Ğ². Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ Ğ¼Ñ‹ Ñ€Ğ°ÑÑĞ¼Ğ¾Ñ‚Ñ€Ğ¸Ğ¼ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Pinterest â€” Ğ¿Ğ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ğ¾Ğ¹ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñ‹ Ğ´Ğ»Ñ Ğ¾Ğ±Ğ¼ĞµĞ½Ğ° Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸ÑĞ¼Ğ¸ Ñ ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¼ **Masonry Layout** (ĞºĞ°Ğ¼ĞµĞ½Ğ½Ğ°Ñ ĞºĞ»Ğ°Ğ´ĞºĞ°).

**Ğ§Ñ‚Ğ¾ Ñ‚Ğ°ĞºĞ¾Ğµ Pinterest?**
- ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ´Ğ»Ñ Ğ¾Ğ±Ğ¼ĞµĞ½Ğ° Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸ÑĞ¼Ğ¸ Ğ² Ğ²Ğ¸Ğ´Ğµ "Ğ¿Ğ¸Ğ½Ğ¾Ğ²" (pins)
- ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸ Ñ€Ğ°Ğ·Ğ½Ğ¾Ğ¹ Ğ²Ñ‹ÑĞ¾Ñ‚Ñ‹
- ĞÑĞ¾Ğ±Ğ°Ñ ÑĞµÑ‚ĞºĞ° â€” Masonry Layout (Masonry Grid)
- Ğ‘ĞµÑĞºĞ¾Ğ½ĞµÑ‡Ğ½Ğ°Ñ Ğ¿Ñ€Ğ¾ĞºÑ€ÑƒÑ‚ĞºĞ° Ñ Ğ¿Ğ¾Ğ´Ğ³Ñ€ÑƒĞ·ĞºĞ¾Ğ¹ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ¿Ğ¸Ğ½Ğ¾Ğ²

**Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸:** Middle/Senior Frontend Engineer  
**Ğ’Ñ€ĞµĞ¼Ñ:** ~45-60 Ğ¼Ğ¸Ğ½ÑƒÑ‚ (Ğ½Ğ° Ğ¸Ğ½Ñ‚ĞµÑ€Ğ²ÑŒÑ Ñ„Ğ¾ĞºÑƒÑ Ğ½Ğ° 1-2 Ñ‚ĞµĞ¼Ğ°Ñ…)  
**ĞšĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸:** Pinterest, Instagram, Google Images

---

## ğŸ“ ĞŸĞ»Ğ°Ğ½ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ğ¾Ğ³Ğ¾ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½Ğ°

1. âœ… **ĞĞ±Ñ‰Ğ¸Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ (General Requirements)**
2. âœ… **Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ (Functional Requirements)**
3. âœ… **ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ² (Components Architecture)**
4. âœ… **Masonry Layout â€” ĞºĞ»ÑÑ‡ĞµĞ²Ğ°Ñ Ğ¾ÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ!**
5. âœ… **ĞœĞ¾Ğ´ĞµĞ»Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (Data Entities)**
6. âœ… **API Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (Data API)**
7. âœ… **Ğ¥Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¸ ÑĞ»Ğ¾Ğ¸ (Data Store & Layers)**
8. âœ… **ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ (Optimization)**
9. âœ… **Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾ÑÑ‚ÑŒ (Accessibility)**

---

## 1. ğŸ“Œ ĞĞ±Ñ‰Ğ¸Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

### ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»:

1. **Masonry Layout**
   - ĞŸĞ¸Ğ½Ñ‹ Ñ€Ğ°Ğ·Ğ¼ĞµÑ‰Ğ°ÑÑ‚ÑÑ Ğ² Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğµ ĞºĞ°Ğ¼ĞµĞ½Ğ½Ğ¾Ğ¹ ĞºĞ»Ğ°Ğ´ĞºĞ¸
   - ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸ Ñ€Ğ°Ğ·Ğ½Ğ¾Ğ¹ Ğ²Ñ‹ÑĞ¾Ñ‚Ñ‹
   - ĞĞ´Ğ°Ğ¿Ñ‚Ğ¸Ğ²Ğ½Ğ°Ñ ÑĞµÑ‚ĞºĞ° (2-8 ĞºĞ¾Ğ»Ğ¾Ğ½Ğ¾Ğº Ğ² Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ¾Ñ‚ viewport)

2. **Ğ’Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ Ñ Ğ¿Ğ¸Ğ½Ğ°Ğ¼Ğ¸**
   - ĞŸÑ€Ğ¸ Ğ½Ğ°Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğ¸ (hover) â€” Ğ¿Ğ¾ĞºĞ°Ğ· Ğ¼ĞµĞ½Ñ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹
   - ĞšĞ»Ğ¸Ğº â€” Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ¹ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¸ Ğ¾ Ğ¿Ğ¸Ğ½Ğµ
   - ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ´ĞµÑ‚Ğ°Ğ»ĞµĞ¹ Ñ ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸ÑĞ¼Ğ¸

3. **Ğ¢Ğ¸Ğ¿Ñ‹ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ°**
   - Ğ˜Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ (JPG, PNG, WebP)
   - GIF Ğ°Ğ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ğ¸
   - âŒ ĞĞ•Ğ¢ Ğ²Ğ¸Ğ´ĞµĞ¾ (ÑƒĞ¿Ñ€Ğ¾Ñ‰ĞµĞ½Ğ¸Ğµ Ğ´Ğ»Ñ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ²ÑŒÑ)

4. **Ğ¡Ğ¾Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸**
   - ĞšĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¸ Ğº Ğ¿Ğ¸Ğ½Ğ°Ğ¼
   - Ğ¨ĞµÑ€Ğ¸Ğ½Ğ³ (Ğ¿Ğ¾Ğ´ĞµĞ»Ğ¸Ñ‚ÑŒÑÑ)
   - Ğ›Ğ°Ğ¹ĞºĞ¸

> **ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ğµ:** ĞĞ° Ğ¸Ğ½Ñ‚ĞµÑ€Ğ²ÑŒÑ Ğ²Ğ°Ñ Ğ¼Ğ¾Ğ³ÑƒÑ‚ Ğ¿Ğ¾Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ ÑÑ„Ğ¾ĞºÑƒÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒÑÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ½Ğ° Masonry Layout â€” ÑÑ‚Ğ¾ ÑĞ°Ğ¼Ğ°Ñ Ğ²Ğ°Ğ¶Ğ½Ğ°Ñ Ğ¸ ÑĞ»Ğ¾Ğ¶Ğ½Ğ°Ñ Ñ‡Ğ°ÑÑ‚ÑŒ!

---

## 2. ğŸ¯ Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

### Ğ‘Ñ€Ğ°ÑƒĞ·ĞµÑ€Ñ‹ Ğ¸ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñ‹:

**ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğ¾Ğ²:**
- âœ… 95% ÑĞ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğ¾Ğ²
- âœ… Chrome, Firefox, Safari, Edge
- âŒ ĞĞ•Ğ¢ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¸ IE11

> Ğ•ÑĞ»Ğ¸ Ğ±Ñ‹ ÑÑ‚Ğ¾ Ğ±Ñ‹Ğ»Ğ¾ Electron-Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ, Ğ¼Ñ‹ Ğ¼Ğ¾Ğ³Ğ»Ğ¸ Ğ±Ñ‹ Ğ·Ğ°Ğ±Ñ‹Ñ‚ÑŒ Ğ¾ compatibility issues!

### Ğ£ÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°:

**ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° ÑˆĞ¸Ñ€Ğ¾ĞºĞ¾Ğ³Ğ¾ ÑĞ¿ĞµĞºÑ‚Ñ€Ğ° ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²:**
- ğŸ“± Ğ¡Ğ¼Ğ°Ñ€Ñ‚Ñ„Ğ¾Ğ½Ñ‹ (iPhone, Android)
- ğŸ“± ĞŸĞ»Ğ°Ğ½ÑˆĞµÑ‚Ñ‹ (iPad)
- ğŸ’» Ğ”ĞµÑĞºÑ‚Ğ¾Ğ¿Ñ‹
- ğŸ–¥ï¸ Ğ‘Ğ¾Ğ»ÑŒÑˆĞ¸Ğµ ÑĞºÑ€Ğ°Ğ½Ñ‹

**ĞĞ´Ğ°Ğ¿Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½:**
- Mobile: 1-2 ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ¸
- Tablet: 2-4 ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ¸
- Desktop: 4-8 ĞºĞ¾Ğ»Ğ¾Ğ½Ğ¾Ğº

### Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:

**Offline Ñ€ĞµĞ¶Ğ¸Ğ¼ (PWA):**
- ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ½Ñ‹Ñ… Ğ¿Ğ¸Ğ½Ğ¾Ğ²
- Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ Ğ±ĞµĞ· Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚Ğ° Ğº Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµĞ½Ğ½Ñ‹Ğ¼ Ñ€Ğ°Ğ½ĞµĞµ
- Progressive Web App Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»

**Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° Ğ¿Ñ€Ğ¸ Ğ¿Ğ»Ğ¾Ñ…Ğ¾Ğ¼ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚Ğµ:**
- ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ¼ĞµĞ´Ğ»ĞµĞ½Ğ½Ñ‹Ñ… ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğ¹
- ĞŸĞ¾ÑÑ‚ĞµĞ¿ĞµĞ½Ğ½Ğ°Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹
- ĞĞ´Ğ°Ğ¿Ñ‚Ğ¸Ğ²Ğ½Ğ¾Ğµ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾

---

## 3. ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ²

### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Pin (Ğ¿Ğ¸Ğ½Ğ°):

```
Pin (ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ°)
â”œâ”€â”€ ĞŸÑ€Ğ¸ Ğ½Ğ°Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğ¸ (hover):
â”‚   â”œâ”€â”€ Picture (Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ)
â”‚   â”œâ”€â”€ Menu (Ğ¼ĞµĞ½Ñ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹)
â”‚   â”‚   â”œâ”€â”€ Link (ÑÑÑ‹Ğ»ĞºĞ°)
â”‚   â”‚   â””â”€â”€ Share (Ğ¿Ğ¾Ğ´ĞµĞ»Ğ¸Ñ‚ÑŒÑÑ)
â”‚   â””â”€â”€ Dropdown (Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ)
â”‚
â””â”€â”€ ĞŸÑ€Ğ¸ ĞºĞ»Ğ¸ĞºĞµ â€” Modal Ñ Ğ´ĞµÑ‚Ğ°Ğ»ÑĞ¼Ğ¸:
    â”œâ”€â”€ Picture (Ñ‚Ğ¾ Ğ¶Ğµ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ)
    â”œâ”€â”€ Details (Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ, Ğ°Ğ²Ñ‚Ğ¾Ñ€, Ğ´Ğ°Ñ‚Ğ°)
    â””â”€â”€ Comments Section
        â”œâ”€â”€ CommentList
        â”‚   â”œâ”€â”€ Comment Ã— N
        â”‚   â””â”€â”€ ShowMoreButton
        â””â”€â”€ CommentInput (Ğ±ĞµĞ· Ğ¼ĞµĞ´Ğ¸Ğ°)
```

### Ğ˜ĞµÑ€Ğ°Ñ€Ñ…Ğ¸Ñ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ² (Dependency Graph):

```
App Root
â””â”€â”€ Router
    â”œâ”€â”€ Header
    â”œâ”€â”€ HomeControls
    â”œâ”€â”€ ProfileControls
    â””â”€â”€ PinsFeedPage â­ (Ğ³Ğ»Ğ°Ğ²Ğ½Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ°)
        â””â”€â”€ PinsGrid (Masonry Layout)
            â””â”€â”€ Pin Ã— N
                â”œâ”€â”€ PinControls
                â”œâ”€â”€ PinMenu
                â”œâ”€â”€ PinPicture
                â””â”€â”€ PinDetails (Modal)
                    â”œâ”€â”€ PinPicture
                    â”œâ”€â”€ PinDetails
                    â””â”€â”€ PinComments
                        â”œâ”€â”€ CommentList
                        â”‚   â””â”€â”€ Comment Ã— N
                        â””â”€â”€ CommentInput
```

**Ğ—Ğ°Ñ‡ĞµĞ¼ Ğ½ÑƒĞ¶ĞµĞ½ Dependency Graph?**
- ĞŸĞ¾Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹ state management
- ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¾Ñ‡ĞµĞº Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ€Ğµ-Ñ€ĞµĞ½Ğ´ĞµÑ€Ğ¾Ğ²

### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ React ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ²:

```tsx
// PinsFeedPage.tsx
import React from 'react';
import { PinsGrid } from './PinsGrid';

export const PinsFeedPage: React.FC = () => {
  return (
    <div className="pins-feed-page">
      <PinsGrid />
    </div>
  );
};
```

```tsx
// PinsGrid.tsx
import React, { useState, useEffect } from 'react';
import { Pin } from './Pin';
import { useMasonryLayout } from '../hooks/useMasonryLayout';

export const PinsGrid: React.FC = () => {
  const [pins, setPins] = useState<number[]>([]);
  const { gridRef, columns, positions } = useMasonryLayout();

  useEffect(() => {
    fetchInitialPins();
  }, []);

  return (
    <div ref={gridRef} className="masonry-grid">
      {pins.map((pinId, index) => (
        <Pin 
          key={pinId} 
          pinId={pinId}
          position={positions[index]}
        />
      ))}
    </div>
  );
};
```

```tsx
// Pin.tsx
import React, { useState } from 'react';
import { PinControls } from './PinControls';
import { PinMenu } from './PinMenu';
import { PinPicture } from './PinPicture';
import { PinDetailsModal } from './PinDetailsModal';

interface PinProps {
  pinId: number;
  position: { top: number; left: number };
}

export const Pin: React.FC<PinProps> = ({ pinId, position }) => {
  const [isHovered, setIsHovered] = useState(false);
  const [isModalOpen, setIsModalOpen] = useState(false);

  const pin = useSelector(state => state.pins.byId[pinId]);

  return (
    <>
      <div
        className="pin"
        style={{
          position: 'absolute',
          top: position.top,
          left: position.left,
          transform: `translate3d(0, 0, 0)` // GPU acceleration
        }}
        onMouseEnter={() => setIsHovered(true)}
        onMouseLeave={() => setIsHovered(false)}
        onClick={() => setIsModalOpen(true)}
      >
        <PinPicture src={pin.imageUrl} alt={pin.title} />
        
        {isHovered && (
          <>
            <PinMenu pinId={pinId} />
            <PinControls pinId={pinId} />
          </>
        )}
      </div>

      {isModalOpen && (
        <PinDetailsModal 
          pinId={pinId}
          onClose={() => setIsModalOpen(false)}
        />
      )}
    </>
  );
};
```

---

## 4. ğŸ§± Masonry Layout â€” ĞšĞ»ÑÑ‡ĞµĞ²Ğ°Ñ ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ!

> **Ğ­Ñ‚Ğ¾ ÑĞ°Ğ¼Ğ°Ñ Ğ²Ğ°Ğ¶Ğ½Ğ°Ñ Ğ¸ ÑĞ»Ğ¾Ğ¶Ğ½Ğ°Ñ Ñ‡Ğ°ÑÑ‚ÑŒ Pinterest!** ĞĞ° Ğ¸Ğ½Ñ‚ĞµÑ€Ğ²ÑŒÑ Ñ‡Ğ°ÑÑ‚Ğ¾ Ğ¿Ñ€Ğ¾ÑÑÑ‚ ÑÑ„Ğ¾ĞºÑƒÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒÑÑ Ğ¸Ğ¼ĞµĞ½Ğ½Ğ¾ Ğ½Ğ° ÑÑ‚Ğ¾Ğ¼.

### Ğ§Ñ‚Ğ¾ Ñ‚Ğ°ĞºĞ¾Ğµ Masonry Layout?

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°:**
- ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸ (Ğ¿Ğ¸Ğ½Ñ‹) Ğ¸Ğ¼ĞµÑÑ‚ Ñ€Ğ°Ğ·Ğ½ÑƒÑ Ğ²Ñ‹ÑĞ¾Ñ‚Ñƒ
- ĞÑƒĞ¶Ğ½Ğ¾ ÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ Ñ€Ğ°Ğ·Ğ¼ĞµÑÑ‚Ğ¸Ñ‚ÑŒ Ğ¸Ñ… Ğ±ĞµĞ· Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ñ… Ğ¿ÑƒÑÑ‚Ñ‹Ñ… Ğ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ÑÑ‚Ğ²
- Ğ¡Ñ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ñ‹Ğ¹ CSS Grid Ğ½Ğµ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ¸Ñ‚ (Ñ„Ğ¸ĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ Ğ²Ñ‹ÑĞ¾Ñ‚Ğ° ÑÑ‚Ñ€Ğ¾Ğº)

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ: Masonry (ĞºĞ°Ğ¼ĞµĞ½Ğ½Ğ°Ñ ĞºĞ»Ğ°Ğ´ĞºĞ°)**
- Ğ­Ğ»ĞµĞ¼ĞµĞ½Ñ‚Ñ‹ Ñ€Ğ°Ğ·Ğ¼ĞµÑ‰Ğ°ÑÑ‚ÑÑ Ğ² ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ°Ñ…
- ĞĞ¾Ğ²Ñ‹Ğ¹ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµÑ‚ÑÑ Ğ² ÑĞ°Ğ¼ÑƒÑ ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºÑƒÑ ĞºĞ¾Ğ»Ğ¾Ğ½ĞºÑƒ
- Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµÑ‚ÑÑ ÑÑ„Ñ„ĞµĞºÑ‚ "ĞºĞ°Ğ¼ĞµĞ½Ğ½Ğ¾Ğ¹ ĞºĞ»Ğ°Ğ´ĞºĞ¸"

---

### Ğ—Ğ¾Ğ½Ñ‹ Ğ¸ ĞºĞ¾Ğ½Ñ†ĞµĞ¿Ñ†Ğ¸Ğ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          BROWSER WINDOW                     â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€ Top Sentinel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                      â”‚   â”‚
â”‚  â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•—  â•”â•â•â•â•â•â•â•â•â•â•â•—         â”‚   â”‚ â† Visible Zone
â”‚  â”‚  â•‘  Pin 1   â•‘  â•‘  Pin 2   â•‘         â”‚   â”‚   (Viewport)
â”‚  â”‚  â•‘  (400px) â•‘  â•‘  (600px) â•‘         â”‚   â”‚
â”‚  â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•  â•šâ•â•â•â•â•â•â•â•â•â•â•         â”‚   â”‚
â”‚  â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•—  â•”â•â•â•â•â•â•â•â•â•â•â•—         â”‚   â”‚
â”‚  â”‚  â•‘  Pin 3   â•‘  â•‘  Pin 4   â•‘         â”‚   â”‚
â”‚  â”‚  â•‘  (500px) â•‘  â•‘  (350px) â•‘         â”‚   â”‚
â”‚  â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•  â•šâ•â•â•â•â•â•â•â•â•â•â•         â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•—  â•”â•â•â•â•â•â•â•â•â•â•â•—         â”‚   â”‚ â† Invisible Zone
â”‚  â”‚  â•‘  Pin 5   â•‘  â•‘  Pin 6   â•‘         â”‚   â”‚   (Rendered but not visible)
â”‚  â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•  â•šâ•â•â•â•â•â•â•â•â•â•â•         â”‚   â”‚
â”‚  â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•—  â•”â•â•â•â•â•â•â•â•â•â•â•—         â”‚   â”‚
â”‚  â”‚  â•‘  Pin 7   â•‘  â•‘  Pin 8   â•‘         â”‚   â”‚
â”‚  â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•  â•šâ•â•â•â•â•â•â•â•â•â•â•         â”‚   â”‚
â”‚  â””â”€ Bottom Sentinel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚     Recycle Zone                  â”‚     â”‚ â† Future Data
â”‚  â”‚  (Canvas ÑƒĞ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ,           â”‚     â”‚   (Not rendered,
â”‚  â”‚   Ğ½Ğ¾ ĞĞ• Ñ€ĞµĞ½Ğ´ĞµÑ€Ğ¸Ñ‚ÑÑ!)              â”‚     â”‚    just reserved space)
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ·Ğ¾Ğ½Ñ‹:

1. **Visible Zone (Viewport)**
   - Ğ§Ñ‚Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ¸Ğ´Ğ¸Ñ‚ ÑĞµĞ¹Ñ‡Ğ°Ñ
   - ĞŸĞ¸Ğ½Ñ‹ Ğ¿Ğ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ Ğ¾Ñ‚Ñ€ĞµĞ½Ğ´ĞµÑ€ĞµĞ½Ñ‹

2. **Invisible Zone**
   - ĞŸĞ¸Ğ½Ñ‹ Ğ¾Ñ‚Ñ€ĞµĞ½Ğ´ĞµÑ€ĞµĞ½Ñ‹ Ğ² DOM
   - ĞĞ¾ Ğ½Ğµ Ğ²Ğ¸Ğ´Ğ½Ñ‹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
   - Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ñ‹ Ğº Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ¼Ñƒ Ğ¿Ğ¾ĞºĞ°Ğ·Ñƒ Ğ¿Ñ€Ğ¸ ÑĞºÑ€Ğ¾Ğ»Ğ»Ğµ

3. **Recycle Zone (Ğ‘ÑƒĞ´ÑƒÑ‰Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ)**
   - Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ñ‹
   - Canvas ÑƒĞ²ĞµĞ»Ğ¸Ñ‡ĞµĞ½ Ğ½Ğ° Ğ¸Ñ… Ñ€Ğ°Ğ·Ğ¼ĞµÑ€
   - ĞĞ Ğ¿Ğ¸Ğ½Ñ‹ ĞĞ• Ğ¾Ñ‚Ñ€ĞµĞ½Ğ´ĞµÑ€ĞµĞ½Ñ‹ Ğ² DOM!
   - Ğ­ĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸

4. **Top/Bottom Sentinels**
   - ĞœĞ°Ñ€ĞºĞµÑ€Ñ‹ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ¸ ĞºĞ¾Ğ½Ñ†Ğ° ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ°
   - Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‚ÑÑ Ñ Intersection Observer
   - Ğ¢Ñ€Ğ¸Ğ³Ğ³ĞµÑ€Ñ‹ Ğ´Ğ»Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

---

### ĞŸĞ¾ÑˆĞ°Ğ³Ğ¾Ğ²Ğ°Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ° Masonry Layout

#### Ğ¨Ğ°Ğ³ 1: ĞĞ°Ñ‡Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°

```
State:
- Loaded: Pin 1-8
- Rendered: Pin 1-8
- Visible: Pin 1-4 (Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ viewport)

Grid: 2 columns
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pin 1   â”‚  Pin 2   â”‚
â”‚ (400px)  â”‚ (600px)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Pin 3   â”‚  Pin 4   â”‚
â”‚ (500px)  â”‚ (350px)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Pin 5   â”‚  Pin 6   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Pin 7   â”‚  Pin 8   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†‘
   Bottom Sentinel
```

#### Ğ¨Ğ°Ğ³ 2: Ğ¡ĞºÑ€Ğ¾Ğ»Ğ» Ğ²Ğ½Ğ¸Ğ· (Ğ±ĞµĞ· Ğ¿ĞµÑ€ĞµÑĞµÑ‡ĞµĞ½Ğ¸Ñ Sentinel)

```
User scrolls down slightly
- Visible Zone moves down
- No intersection with Bottom Sentinel yet
- No action needed
```

#### Ğ¨Ğ°Ğ³ 3: ĞŸĞµÑ€ĞµÑĞµÑ‡ĞµĞ½Ğ¸Ğµ Bottom Sentinel â€” Ğ—ĞĞ“Ğ Ğ£Ğ—ĞšĞ!

```
INTERSECTION DETECTED!
Action: Load Pin 9-10, Remove Pin 1-2 from DOM

Sliding Window (Ğ´Ğ²ÑƒÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ğ½ÑÑ Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ):
Before: [Pin1, Pin2, Pin3, Pin4, Pin5, Pin6, Pin7, Pin8]
         â†“ pop(2)          â†“ push(2)
After:  [Pin3, Pin4, Pin5, Pin6, Pin7, Pin8, Pin9, Pin10]

New Grid:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pin 3   â”‚  Pin 4   â”‚ â† Top Sentinel MOVED UP
â”‚ (500px)  â”‚ (350px)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Pin 5   â”‚  Pin 6   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Pin 7   â”‚  Pin 8   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Pin 9   â”‚  Pin 10  â”‚ â† NEW
â”‚ (450px)  â”‚ (550px)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†‘
   Bottom Sentinel MOVED DOWN
```

**ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ ÑƒĞ±Ğ¸Ñ€Ğ°ĞµĞ¼ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Pin 1-2, Ğ° Ğ½Ğµ Pin 3-4?**
- Pin 3-4 Ğ±Ğ»Ğ¸Ğ·ĞºĞ¾ Ğº viewport
- Ğ•ÑĞ»Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾ Ğ¿Ñ€Ğ¾ĞºÑ€ÑƒÑ‚Ğ¸Ñ‚ Ğ½Ğ°Ğ·Ğ°Ğ´, Ğ¾Ğ½Ğ¸ ÑƒĞ¶Ğµ ĞµÑÑ‚ÑŒ
- Ğ˜Ğ·Ğ±ĞµĞ³Ğ°ĞµĞ¼ Ğ»Ğ¸ÑˆĞ½Ğ¸Ñ… Ñ€Ğµ-Ñ€ĞµĞ½Ğ´ĞµÑ€Ğ¾Ğ² Ğ¿Ñ€Ğ¸ "Ğ´Ñ€Ğ¾Ğ¶Ğ°Ñ‰ĞµĞ¼" ÑĞºÑ€Ğ¾Ğ»Ğ»Ğµ

---

### ĞĞ±ÑĞ¾Ğ»ÑÑ‚Ğ½Ğ¾Ğµ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ (Absolute Canvas)

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°:** Ğ’ÑÑ‚Ğ°Ğ²ĞºĞ°/ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ DOM ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² = Ğ”ĞĞ ĞĞ“Ğ! ğŸ’°

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:** ĞĞµ ÑƒĞ´Ğ°Ğ»ÑĞµĞ¼, Ğ° ĞŸĞ•Ğ Ğ•ĞœĞ•Ğ©ĞĞ•Ğœ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğµ Ğ½Ğ¾Ğ´Ñ‹!

```css
.masonry-grid {
  position: relative;
  /* Flexbox Ğ´Ğ»Ñ Ñ€Ğ°ÑÑ‡ĞµÑ‚Ğ° ĞºĞ¾Ğ»Ğ¾Ğ½Ğ¾Ğº */
  display: flex;
  flex-direction: row;
}

.pin {
  position: absolute;
  /* GPU-accelerated transform */
  transform: translate3d(0, 0, 0);
  will-change: transform;
}
```

#### Ğ Ğ°ÑÑ‡ĞµÑ‚ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¹:

```typescript
// ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ´Ğ»Ñ 2-ĞºĞ¾Ğ»Ğ¾Ğ½Ğ¾Ñ‡Ğ½Ğ¾Ğ¹ ÑĞµÑ‚ĞºĞ¸

interface Position {
  top: number;
  left: number;
  columnIndex: number;
}

// ĞĞ°Ñ‡Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸
Pin 1: { top: 0,    left: 0,       column: 0 }
Pin 2: { top: 0,    left: 340px,   column: 1 }

// Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ñ€ÑĞ´ â€” Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ = Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰Ğ¸Ğ¹ PIN Ğ¸Ğ· Ñ‚Ğ¾Ğ¹ Ğ¶Ğµ ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ¸ + ĞµĞ³Ğ¾ Ğ²Ñ‹ÑĞ¾Ñ‚Ğ° + margin
Pin 3: { 
  top: Pin1.top + Pin1.height + MARGIN,  // 0 + 400 + 16 = 416px
  left: 0,
  column: 0
}

Pin 4: {
  top: Pin2.top + Pin2.height + MARGIN,  // 0 + 600 + 16 = 616px
  left: 340px,
  column: 1
}

// Pin 5 â€” Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ ĞºĞ¾Ğ»Ğ¾Ğ½ĞºÑƒ Ñ Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ²Ñ‹ÑĞ¾Ñ‚Ğ¾Ğ¹!
columnHeights = [416 + 500, 616 + 350] = [916, 966]
minColumn = 0 (916 < 966)

Pin 5: {
  top: 916px,
  left: 0,
  column: 0
}
```

**Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ°:**
```
position.top = previousInColumn.top + previousInColumn.height + MARGIN
position.left = columnIndex * (PIN_WIDTH + MARGIN)
```

---

### ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ ÑÑ‚Ğ¾ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ğ½Ğ¾Ğ¹ Ğ²Ñ‹ÑĞ¾Ñ‚Ñ‹?

```
Column 0          Column 1
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Pin 1   â”‚      â”‚ Pin 2   â”‚
â”‚ (400px) â”‚      â”‚ (600px) â”‚ â† Ğ”Ğ»Ğ¸Ğ½Ğ½ĞµĞµ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ Pin 3   â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ (500px) â”‚      â”‚ Pin 4   â”‚
â”‚         â”‚      â”‚ (350px) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚ Pin 6   â”‚
                 â”‚ (400px) â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ Pin 5   â”‚
â”‚ (700px) â”‚
â”‚         â”‚
â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ğ’Ñ‹ÑĞ¾Ñ‚Ñ‹ ĞºĞ¾Ğ»Ğ¾Ğ½Ğ¾Ğº: [1600px, 1350px]
Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ğ¿Ğ¸Ğ½ â†’ Column 1 (ĞºĞ¾Ñ€Ğ¾Ñ‡Ğµ)
```

**ĞĞ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼:**
1. Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ÑĞµĞ¼ Ñ‚ĞµĞºÑƒÑ‰ÑƒÑ Ğ²Ñ‹ÑĞ¾Ñ‚Ñƒ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ¸
2. ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ¿Ğ¸Ğ½ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ² ÑĞ°Ğ¼ÑƒÑ ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºÑƒÑ
3. ĞŸĞ¾Ğ·Ğ¸Ñ†Ğ¸Ñ = `columnHeights[shortestColumn]`
4. ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞµĞ¼ Ğ²Ñ‹ÑĞ¾Ñ‚Ñƒ ÑÑ‚Ğ¾Ğ¹ ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ¸

---

### Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Masonry Layout

```typescript
// hooks/useMasonryLayout.ts

interface MasonryConfig {
  columnWidth: number;
  gutter: number;
  containerWidth: number;
}

interface PinPosition {
  top: number;
  left: number;
  column: number;
}

export const useMasonryLayout = (config: MasonryConfig) => {
  const [columnHeights, setColumnHeights] = useState<number[]>([]);
  const [positions, setPositions] = useState<PinPosition[]>([]);

  // Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ÑĞµĞ¼ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ĞºĞ¾Ğ»Ğ¾Ğ½Ğ¾Ğº
  const columnCount = Math.floor(
    (config.containerWidth + config.gutter) / 
    (config.columnWidth + config.gutter)
  );

  // Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ĞºĞ¾Ğ»Ğ¾Ğ½Ğ¾Ğº
  useEffect(() => {
    setColumnHeights(new Array(columnCount).fill(0));
  }, [columnCount]);

  const calculatePosition = (pinHeight: number): PinPosition => {
    // ĞĞ°Ñ…Ğ¾Ğ´Ğ¸Ğ¼ ÑĞ°Ğ¼ÑƒÑ ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºÑƒÑ ĞºĞ¾Ğ»Ğ¾Ğ½ĞºÑƒ
    const shortestColumnIndex = columnHeights.indexOf(
      Math.min(...columnHeights)
    );

    const position: PinPosition = {
      top: columnHeights[shortestColumnIndex],
      left: shortestColumnIndex * (config.columnWidth + config.gutter),
      column: shortestColumnIndex
    };

    // ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞµĞ¼ Ğ²Ñ‹ÑĞ¾Ñ‚Ñƒ ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ¸
    const newHeights = [...columnHeights];
    newHeights[shortestColumnIndex] += pinHeight + config.gutter;
    setColumnHeights(newHeights);

    return position;
  };

  return { calculatePosition, positions, columnCount };
};
```

```typescript
// components/MasonryGrid.tsx

import React, { useRef, useEffect, useState } from 'react';
import { Pin } from './Pin';

export const MasonryGrid: React.FC = () => {
  const containerRef = useRef<HTMLDivElement>(null);
  const [containerWidth, setContainerWidth] = useState(0);
  const [pins, setPins] = useState<PinData[]>([]);

  const PIN_WIDTH = 236;
  const GUTTER = 16;

  const { calculatePosition } = useMasonryLayout({
    columnWidth: PIN_WIDTH,
    gutter: GUTTER,
    containerWidth
  });

  // Ğ˜Ğ·Ğ¼ĞµÑ€ÑĞµĞ¼ ÑˆĞ¸Ñ€Ğ¸Ğ½Ñƒ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ°
  useEffect(() => {
    const updateWidth = () => {
      if (containerRef.current) {
        setContainerWidth(containerRef.current.offsetWidth);
      }
    };

    updateWidth();
    window.addEventListener('resize', updateWidth);
    return () => window.removeEventListener('resize', updateWidth);
  }, []);

  // Ğ ĞµĞ½Ğ´ĞµÑ€Ğ¸Ğ¼ Ğ¿Ğ¸Ğ½Ñ‹ Ñ Ğ°Ğ±ÑĞ¾Ğ»ÑÑ‚Ğ½Ñ‹Ğ¼ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼
  return (
    <div 
      ref={containerRef}
      className="masonry-container"
      style={{ position: 'relative' }}
    >
      {pins.map((pin) => {
        const position = calculatePosition(pin.height);
        
        return (
          <Pin
            key={pin.id}
            pin={pin}
            style={{
              position: 'absolute',
              top: `${position.top}px`,
              left: `${position.left}px`,
              width: `${PIN_WIDTH}px`,
              transform: 'translate3d(0, 0, 0)', // GPU acceleration
            }}
          />
        );
      })}
    </div>
  );
};
```

---

### Ğ’Ğ¸Ñ€Ñ‚ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ Sliding Window

```typescript
// hooks/useSlidingWindow.ts

interface SlidingWindowConfig {
  windowSize: number; // Ğ¡ĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ğ¸Ğ½Ğ¾Ğ² Ğ´ĞµÑ€Ğ¶Ğ°Ñ‚ÑŒ Ğ² DOM
  overscan: number;   // Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ğ¸Ğ½Ñ‹ ÑĞ²ĞµÑ€Ñ…Ñƒ/ÑĞ½Ğ¸Ğ·Ñƒ
}

export const useSlidingWindow = (
  allPins: number[],
  config: SlidingWindowConfig
) => {
  const [visibleRange, setVisibleRange] = useState({ start: 0, end: config.windowSize });
  const [topPadding, setTopPadding] = useState(0);
  const [bottomPadding, setBottomPadding] = useState(0);

  const handleScroll = (scrollTop: number, viewportHeight: number) => {
    // Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ÑĞµĞ¼ ĞºĞ°ĞºĞ¸Ğµ Ğ¿Ğ¸Ğ½Ñ‹ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ±Ñ‹Ñ‚ÑŒ Ğ²Ğ¸Ğ´Ğ½Ñ‹
    const firstVisibleIndex = Math.floor(scrollTop / AVERAGE_PIN_HEIGHT);
    const lastVisibleIndex = Math.ceil(
      (scrollTop + viewportHeight) / AVERAGE_PIN_HEIGHT
    );

    // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ overscan
    const start = Math.max(0, firstVisibleIndex - config.overscan);
    const end = Math.min(
      allPins.length,
      lastVisibleIndex + config.overscan
    );

    setVisibleRange({ start, end });

    // Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ÑĞµĞ¼ padding Ğ´Ğ»Ñ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ğ¸Ğ»Ğ»ÑĞ·Ğ¸Ğ¸ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ³Ğ¾ ÑĞ¿Ğ¸ÑĞºĞ°
    setTopPadding(start * AVERAGE_PIN_HEIGHT);
    setBottomPadding((allPins.length - end) * AVERAGE_PIN_HEIGHT);
  };

  // Ğ’Ğ¸Ğ´Ğ¸Ğ¼Ñ‹Ğµ Ğ¿Ğ¸Ğ½Ñ‹ (Sliding Window)
  const visiblePins = allPins.slice(visibleRange.start, visibleRange.end);

  return {
    visiblePins,
    topPadding,
    bottomPadding,
    handleScroll
  };
};
```

```tsx
// Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
export const VirtualizedMasonryGrid: React.FC = () => {
  const [allPinIds, setAllPinIds] = useState<number[]>([]);
  const { visiblePins, topPadding, bottomPadding, handleScroll } = useSlidingWindow(
    allPinIds,
    { windowSize: 50, overscan: 10 }
  );

  return (
    <div 
      className="virtualized-masonry"
      onScroll={(e) => handleScroll(e.currentTarget.scrollTop, e.currentTarget.clientHeight)}
    >
      {/* Top padding - ÑĞ¾Ğ·Ğ´Ğ°ĞµÑ‚ ÑÑ„Ñ„ĞµĞºÑ‚ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ° ÑĞ²ĞµÑ€Ñ…Ñƒ */}
      <div style={{ height: `${topPadding}px` }} />

      {/* Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ²Ğ¸Ğ´Ğ¸Ğ¼Ñ‹Ğµ Ğ¿Ğ¸Ğ½Ñ‹ */}
      <div className="masonry-container">
        {visiblePins.map(pinId => (
          <Pin key={pinId} pinId={pinId} />
        ))}
      </div>

      {/* Bottom padding - Ñ€ĞµĞ·ĞµÑ€Ğ²Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¼ĞµÑÑ‚Ğ¾ ÑĞ½Ğ¸Ğ·Ñƒ */}
      <div style={{ height: `${bottomPadding}px` }} />
    </div>
  );
};
```

---

### ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ Masonry

#### 1. GPU Acceleration

```css
.pin {
  /* Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ transform Ğ²Ğ¼ĞµÑÑ‚Ğ¾ top/left Ğ´Ğ»Ñ Ğ°Ğ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ğ¹ */
  transform: translate3d(0, 0, 0);
  
  /* ĞŸĞ¾Ğ´ÑĞºĞ°Ğ·ĞºĞ° Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ñƒ Ğ¾ Ğ±ÑƒĞ´ÑƒÑ‰Ğ¸Ñ… Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸ÑÑ… */
  will-change: transform;
  
  /* Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ ÑĞ»Ğ¾Ğ¹ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¸Ğ½Ğ³Ğ° */
  transform-style: preserve-3d;
}
```

**ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ ÑÑ‚Ğ¾ Ğ²Ğ°Ğ¶Ğ½Ğ¾?**
- `top`/`left` Ñ‚Ñ€Ğ¸Ğ³Ğ³ĞµÑ€ÑÑ‚ **Layout** (reflow) â€” Ğ”ĞĞ ĞĞ“Ğ! ğŸ’°
- `transform` Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ½Ğ° **Composite** ÑĞ»Ğ¾Ğµ â€” Ğ”Ğ•Ğ¨Ğ•Ğ’Ğ! âœ…
- Ğ‘Ñ€Ğ°ÑƒĞ·ĞµÑ€ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿ĞµÑ€ĞµÑ€Ğ¸ÑĞ¾Ğ²Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ¿Ğ¸ĞºÑĞµĞ»Ğ¸, Ğ½Ğµ Ğ¿ĞµÑ€ĞµÑÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ layout

#### 2. Intersection Observer Ğ´Ğ»Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸

```typescript
// hooks/useInfiniteScroll.ts

export const useInfiniteScroll = (onLoadMore: () => void) => {
  const sentinelRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    const sentinel = sentinelRef.current;
    if (!sentinel) return;

    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          onLoadMore();
        }
      },
      {
        root: null,
        rootMargin: '200px', // Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµĞ¼ Ğ·Ğ° 200px Ğ´Ğ¾ ĞºĞ¾Ğ½Ñ†Ğ°
        threshold: 0.1
      }
    );

    observer.observe(sentinel);

    return () => observer.disconnect();
  }, [onLoadMore]);

  return { sentinelRef };
};
```

```tsx
// Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
export const MasonryGrid: React.FC = () => {
  const { sentinelRef } = useInfiniteScroll(() => {
    loadMorePins();
  });

  return (
    <div className="masonry-grid">
      {/* ĞŸĞ¸Ğ½Ñ‹ */}
      
      {/* Bottom Sentinel */}
      <div ref={sentinelRef} style={{ height: '1px' }} />
    </div>
  );
};
```

---

### Ğ¡ĞºÑ€Ğ¾Ğ»Ğ» Ğ²Ğ²ĞµÑ€Ñ… (Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ğ¾Ğµ Ğ½Ğ°Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ)

```
User scrolls UP
Current window: [Pin3, Pin4, ..., Pin10]

Action: Load Pin1-2, Remove Pin9-10

Sliding Window operation:
Before: [Pin3, Pin4, Pin5, Pin6, Pin7, Pin8, Pin9, Pin10]
         â†“ unshift(2)      â†“ pop(2)
After:  [Pin1, Pin2, Pin3, Pin4, Pin5, Pin6, Pin7, Pin8]

Updates:
- Top Sentinel MOVED DOWN (Ğ±Ğ¾Ğ»ÑŒÑˆĞµ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ° ÑĞ²ĞµÑ€Ñ…Ñƒ)
- Bottom Sentinel MOVED UP (Ğ¼ĞµĞ½ÑŒÑˆĞµ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ° ÑĞ½Ğ¸Ğ·Ñƒ)
- Top Padding DECREASED
- Bottom Padding INCREASED
```

---

## 5. ğŸ“Š ĞœĞ¾Ğ´ĞµĞ»Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (Data Entities)

```typescript
// types/pin.ts

/**
 * ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ Ğ¿Ğ¸Ğ½Ğ°
 */
interface Pin {
  id: number;
  origin: PinBoard;      // Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ğº (Ğ´Ğ¾ÑĞºĞ°)
  title: string;
  description: string;
  imageUrl: string;
  author: number;        // User ID
  width: number;         // ĞÑ€Ğ¸Ğ³Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑˆĞ¸Ñ€Ğ¸Ğ½Ğ°
  height: number;        // ĞÑ€Ğ¸Ğ³Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ²Ñ‹ÑĞ¾Ñ‚Ğ°
  aspectRatio: number;   // width / height
  createdAt: number;     // timestamp
  likesCount: number;
  commentsCount: number;
  sharesCount: number;
}

/**
 * Ğ”Ğ¾ÑĞºĞ° (Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ğº Ğ¿Ğ¸Ğ½Ğ¾Ğ²)
 */
interface PinBoard {
  id: number;
  name: string;
  description: string;
  coverImage: string;
  pinsCount: number;
}

/**
 * ĞšĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¹
 */
interface Comment {
  id: number;
  pinId: number;
  authorId: number;      // User ID
  content: string;
  createdAt: number;     // timestamp
  likesCount: number;
}

/**
 * ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ
 */
interface User {
  id: number;
  nickname: string;
  avatar: string;
  verified: boolean;
}
```

---

## 6. ğŸ”Œ API Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### REST Endpoints:

```typescript
// api/types.ts

interface GetPinsParams {
  apiKey: string;
  userId: number;
  cursor?: number;         // timestamp Ğ´Ğ»Ñ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸
  pageSize?: number;       // ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¿Ğ¸Ğ½Ğ¾Ğ² (default: 20)
  minId?: number;          // Ğ´Ğ»Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ğ½Ğ¾Ğ²Ñ‹Ñ… (ĞµÑĞ»Ğ¸ ĞµÑÑ‚ÑŒ 1000, Ğ·Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ğ¼ 1001+)
  includeComments?: boolean; // Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°Ñ‚ÑŒ Ğ»Ğ¸ ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¸ ÑÑ€Ğ°Ğ·Ñƒ
  boardId?: number;        // Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ñ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ¹ Ğ´Ğ¾ÑĞºĞ¸ (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
}

interface GetPinsResponse {
  pins: Pin[];
  cursor: number;          // Ğ´Ğ»Ñ ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ¹ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸
  hasMore: boolean;
}

interface GetCommentsParams {
  apiKey: string;
  pinId: number;
  pageSize?: number;
}

interface GetCommentsResponse {
  comments: Comment[];
  hasMore: boolean;
}
```

### API Service:

```typescript
// services/pinterestAPI.ts

class PinterestAPI {
  private baseURL = 'https://api.pinterest.com/v1';
  private apiKey: string;

  constructor(apiKey: string) {
    this.apiKey = apiKey;
  }

  /**
   * ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¸Ğ½Ğ¾Ğ²
   */
  async getPins(params: GetPinsParams): Promise<GetPinsResponse> {
    const queryParams = new URLSearchParams({
      apiKey: this.apiKey,
      userId: params.userId.toString(),
      cursor: params.cursor?.toString() || Date.now().toString(),
      pageSize: params.pageSize?.toString() || '20',
      ...(params.minId && { minId: params.minId.toString() }),
      ...(params.includeComments && { includeComments: 'true' }),
      ...(params.boardId && { boardId: params.boardId.toString() })
    });

    const response = await fetch(`${this.baseURL}/pins?${queryParams}`);
    return await response.json();
  }

  /**
   * ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸ĞµĞ² Ğº Ğ¿Ğ¸Ğ½Ñƒ
   */
  async getComments(params: GetCommentsParams): Promise<GetCommentsResponse> {
    const queryParams = new URLSearchParams({
      apiKey: this.apiKey,
      pinId: params.pinId.toString(),
      pageSize: params.pageSize?.toString() || '20'
    });

    const response = await fetch(`${this.baseURL}/comments?${queryParams}`);
    return await response.json();
  }
}

export const pinterestAPI = new PinterestAPI(process.env.API_KEY!);
```

---

## 7. ğŸ—„ï¸ Ğ¥Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¸ ÑĞ»Ğ¾Ğ¸ (Data Store & Layers)

### ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ÑĞ»Ğ¾ĞµĞ² Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         PinsFeedPage (Component)        â”‚
â”‚              â†“ FETCH                    â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚         â”‚  getPins()  â”‚ API Call        â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚              â†“                           â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚    â”‚ Normalize & Store    â”‚             â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚              â†“                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         NORMALIZED STORE                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  pins: {                                â”‚
â”‚    byId: { [pinId]: Pin }               â”‚
â”‚    allIds: number[]                     â”‚
â”‚  }                                      â”‚
â”‚                                         â”‚
â”‚  users: {                               â”‚
â”‚    byId: { [userId]: User }             â”‚
â”‚  }                                      â”‚
â”‚                                         â”‚
â”‚  comments: {                            â”‚
â”‚    byPinId: {                          â”‚
â”‚      [pinId]: Comment[]                â”‚
â”‚    }                                    â”‚
â”‚  }                                      â”‚
â”‚                                         â”‚
â”‚  boards: {                              â”‚
â”‚    byId: { [boardId]: PinBoard }        â”‚
â”‚  }                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ ACCESS by ID
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        PinsGrid (Component)             â”‚
â”‚   pins.allIds â†’ [1, 2, 3, ...]          â”‚
â”‚         â†“ map(id => pins.byId[id])      â”‚
â”‚       Pin Component                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Redux Store Implementation:

```typescript
// store/slices/pinsSlice.ts

import { createSlice, PayloadAction } from '@reduxjs/toolkit';

interface PinsState {
  byId: Record<number, Pin>;
  allIds: number[];
  isLoading: boolean;
  error: string | null;
}

const initialState: PinsState = {
  byId: {},
  allIds: [],
  isLoading: false,
  error: null
};

const pinsSlice = createSlice({
  name: 'pins',
  initialState,
  reducers: {
    addPins(state, action: PayloadAction<Pin[]>) {
      action.payload.forEach(pin => {
        if (!state.byId[pin.id]) {
          state.byId[pin.id] = pin;
          state.allIds.push(pin.id);
        }
      });
    },
    
    updatePin(state, action: PayloadAction<{ id: number; changes: Partial<Pin> }>) {
      const { id, changes } = action.payload;
      if (state.byId[id]) {
        state.byId[id] = { ...state.byId[id], ...changes };
      }
    },

    setLoading(state, action: PayloadAction<boolean>) {
      state.isLoading = action.payload;
    }
  }
});

export const { addPins, updatePin, setLoading } = pinsSlice.actions;
export default pinsSlice.reducer;
```

### ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ° Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ store:

```typescript
// âŒ ĞŸĞ»Ğ¾Ñ…Ğ¾: Ğ’Ğ»Ğ¾Ğ¶ĞµĞ½Ğ½Ğ°Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°
const badStore = {
  pins: [
    {
      id: 1,
      author: { id: 10, name: 'John' },
      board: { id: 100, name: 'Travel' },
      comments: [
        { id: 1001, author: { id: 20, name: 'Jane' } }
      ]
    }
  ]
};
// ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹:
// - Ğ”ÑƒĞ±Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ (John Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¾Ğ¼ Ğ¼Ğ½Ğ¾Ğ³Ğ¸Ñ… Ğ¿Ğ¸Ğ½Ğ¾Ğ²)
// - Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ (Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ¸ÑĞºĞ°Ñ‚ÑŒ Ğ¿Ğ¾ Ğ¼Ğ°ÑÑĞ¸Ğ²Ğ°Ğ¼)
// - ĞĞµÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ O(n)

// âœ… Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ¾: ĞĞ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°
const goodStore = {
  pins: {
    byId: {
      1: { id: 1, authorId: 10, boardId: 100, commentIds: [1001] }
    },
    allIds: [1]
  },
  users: {
    byId: {
      10: { id: 10, name: 'John' },
      20: { id: 20, name: 'Jane' }
    }
  },
  boards: {
    byId: {
      100: { id: 100, name: 'Travel' }
    }
  },
  comments: {
    byId: {
      1001: { id: 1001, authorId: 20, content: '...' }
    }
  }
};
// ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ°:
// - O(1) Ğ´Ğ¾ÑÑ‚ÑƒĞ¿
// - ĞĞµÑ‚ Ğ´ÑƒĞ±Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
// - ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ
```

---

## 8. âš¡ ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

### A. ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ ÑĞµÑ‚Ğ¸ (Network Performance)

#### 1. Ğ¡Ğ¶Ğ°Ñ‚Ğ¸Ğµ Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²

```nginx
# nginx.conf

# Gzip ÑĞ¶Ğ°Ñ‚Ğ¸Ğµ (40-50% ÑĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ğ¸)
gzip on;
gzip_vary on;
gzip_min_length 1024;
gzip_types
  text/css
  text/javascript
  application/javascript
  application/json
  image/svg+xml;

# Brotli ÑĞ¶Ğ°Ñ‚Ğ¸Ğµ (10-20% Ğ»ÑƒÑ‡ÑˆĞµ Gzip!)
brotli on;
brotli_comp_level 6;
brotli_types text/css application/javascript;
```

#### 2. HTTP/2

**ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ HTTP/2 Ğ²Ğ°Ğ¶ĞµĞ½ Ğ´Ğ»Ñ Pinterest:**

```
HTTP/1.1:
- ĞœĞ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ 5-6 Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ñ‹Ñ… ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğ¹
- ĞÑƒĞ¶Ğ½Ğ¾ Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½ÑÑ‚ÑŒ Ğ²ÑĞµ Ğ² Ğ¾Ğ´Ğ¸Ğ½ bundle
- ĞœĞµĞ´Ğ»ĞµĞ½Ğ½Ğ°Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¼Ğ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²Ğ° Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹

HTTP/2:
- Multiplexing â€” 100+ Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ² Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ¾!
- ĞœĞ¾Ğ¶Ğ½Ğ¾ Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ ĞºĞ°Ğ¶Ğ´Ğ¾Ğµ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾
- Code splitting ÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²ĞµĞ½
```

#### 3. Code Splitting

```typescript
// webpack.config.js

module.exports = {
  optimization: {
    splitChunks: {
      chunks: 'all',
      cacheGroups: {
        vendor: {
          test: /[\\/]node_modules[\\/]/,
          name: 'vendors',
          priority: 10
        },
        pinsGrid: {
          test: /[\\/]src[\\/]components[\\/]PinsGrid/,
          name: 'pins-grid',
          priority: 5
        },
        analytics: {
          test: /[\\/]analytics[\\/]/,
          name: 'analytics',
          priority: 1
        }
      }
    }
  }
};
```

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:**
- `vendors.bundle.js` (React, Redux) â€” ĞºÑÑˆĞ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ½Ğ°Ğ´Ğ¾Ğ»Ğ³Ğ¾
- `pins-grid.bundle.js` â€” Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»
- `analytics.bundle.js` â€” Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµÑ‚ÑÑ Ğ¿Ğ¾Ğ·Ğ¶Ğµ

#### 4. ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹ â€” ĞšĞ›Ğ®Ğ§Ğ•Ğ’ĞĞ•!

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°:** Pinterest = 90% Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹!

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ: Image Optimization Service**

```
User Request
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client (Ğ·Ğ½Ğ°ĞµÑ‚ viewport)        â”‚
â”‚  viewport: 375px (mobile)       â”‚
â”‚  dpr: 2 (retina)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“ Request optimized image
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CDN Cache                      â”‚
â”‚  Check: cached version exists?  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“ Cache MISS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Image Optimization Service     â”‚
â”‚  1. Resize: 375 Ã— 2 = 750px     â”‚
â”‚  2. Format: WebP                â”‚
â”‚  3. Quality: 85                 â”‚
â”‚  4. Compress                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“ Return + Cache in CDN
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client receives optimized      â”‚
â”‚  Size: 50KB instead of 500KB!   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```typescript
// services/imageOptimization.ts

interface ImageOptions {
  width: number;
  quality?: number;
  format?: 'webp' | 'jpeg' | 'png';
}

class ImageOptimizationService {
  private cdnBaseUrl = 'https://cdn.pinterest.com';

  getOptimizedUrl(originalUrl: string, options: ImageOptions): string {
    const params = new URLSearchParams({
      url: originalUrl,
      w: options.width.toString(),
      q: (options.quality || 85).toString(),
      f: options.format || 'webp'
    });

    return `${this.cdnBaseUrl}/transform?${params}`;
  }

  /**
   * ĞĞ´Ğ°Ğ¿Ñ‚Ğ¸Ğ²Ğ½Ğ¾Ğµ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ viewport
   */
  getResponsiveUrl(originalUrl: string): string {
    const viewport = window.innerWidth;
    const dpr = window.devicePixelRatio || 1;

    // ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµĞ¼ ÑˆĞ¸Ñ€Ğ¸Ğ½Ñƒ Ğ¿Ğ¸Ğ½Ğ° Ğ½Ğ° Ñ‚ĞµĞºÑƒÑ‰ĞµĞ¼ viewport
    let pinWidth: number;
    if (viewport < 600) {
      pinWidth = viewport - 32; // Mobile: full width - padding
    } else if (viewport < 900) {
      pinWidth = (viewport - 48) / 2; // Tablet: 2 columns
    } else {
      pinWidth = 236; // Desktop: fixed width
    }

    const actualWidth = Math.ceil(pinWidth * dpr);

    return this.getOptimizedUrl(originalUrl, {
      width: actualWidth,
      format: this.supportsWebP() ? 'webp' : 'jpeg'
    });
  }

  private supportsWebP(): boolean {
    const canvas = document.createElement('canvas');
    return canvas.toDataURL('image/webp').indexOf('data:image/webp') === 0;
  }
}

export const imageService = new ImageOptimizationService();
```

**Ğ­ĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ:**
- Original: 2MB â†’ Optimized: 200KB (90% Ğ¼ĞµĞ½ÑŒÑˆĞµ!)
- Mobile: 100KB
- Desktop: 200KB
- Ğ’ÑĞµ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ Ğ² WebP Ğ³Ğ´Ğµ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾

#### 5. Lazy Loading Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹

```tsx
// components/LazyPinImage.tsx

export const LazyPinImage: React.FC<{
  src: string;
  alt: string;
  height: number;
}> = ({ src, alt, height }) => {
  const [isLoaded, setIsLoaded] = useState(false);
  const { ref, isVisible } = useLazyLoad({ rootMargin: '200px' });

  return (
    <div 
      ref={ref}
      className="pin-image-container"
      style={{ height: `${height}px` }}
    >
      {!isVisible && (
        <div className="skeleton" style={{ height: '100%' }} />
      )}
      
      {isVisible && (
        <img
          src={imageService.getResponsiveUrl(src)}
          alt={alt}
          loading="lazy"
          onLoad={() => setIsLoaded(true)}
          style={{ opacity: isLoaded ? 1 : 0 }}
        />
      )}
    </div>
  );
};
```

---

### B. ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ñ€ĞµĞ½Ğ´ĞµÑ€Ğ¸Ğ½Ğ³Ğ° (Rendering Performance)

#### 1. Time to First Contentful Paint (FCP)

```html
<!-- index.html -->
<!DOCTYPE html>
<html>
<head>
  <!-- Inline critical CSS -->
  <style>
    /* Above-the-fold ÑÑ‚Ğ¸Ğ»Ğ¸ Ğ´Ğ»Ñ Masonry Grid */
    .masonry-grid {
      position: relative;
      width: 100%;
    }
    .pin {
      position: absolute;
      width: 236px;
      border-radius: 16px;
      overflow: hidden;
    }
    .skeleton {
      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
      animation: shimmer 1.5s infinite;
    }
  </style>

  <!-- Preconnect Ğº Ğ²Ğ°Ğ¶Ğ½Ñ‹Ğ¼ Ğ´Ğ¾Ğ¼ĞµĞ½Ğ°Ğ¼ -->
  <link rel="preconnect" href="https://cdn.pinterest.com">
  <link rel="dns-prefetch" href="https://analytics.pinterest.com">
</head>
<body>
  <div id="root"></div>

  <!-- ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ÑĞºÑ€Ğ¸Ğ¿Ñ‚ Ñ defer -->
  <script src="/bundle.js" defer></script>
  
  <!-- ĞĞ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ° Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµÑ‚ÑÑ Ğ¿Ğ¾ÑĞ»Ğµ onLoad -->
  <script>
    window.addEventListener('load', () => {
      const script = document.createElement('script');
      script.src = '/analytics.js';
      document.body.appendChild(script);
    });
  </script>
</body>
</html>
```

#### 2. CSS Naming Strategy (BEM)

```css
/* âŒ ĞŸĞ»Ğ¾Ñ…Ğ¾: Ğ“Ğ»ÑƒĞ±Ğ¾ĞºĞ°Ñ Ğ²Ğ»Ğ¾Ğ¶ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ */
.pins-grid .pin .image-container .image {
  /* Ğ‘Ñ€Ğ°ÑƒĞ·ĞµÑ€Ñƒ Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ¿Ñ€Ğ¾Ğ¹Ñ‚Ğ¸ 4 ÑƒÑ€Ğ¾Ğ²Ğ½Ñ */
}

/* âœ… Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ¾: ĞŸĞ»Ğ¾ÑĞºĞ¸Ğµ ÑĞµĞ»ĞµĞºÑ‚Ğ¾Ñ€Ñ‹ (BEM) */
.pin__image {
  /* ĞŸÑ€ÑĞ¼Ğ¾Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ */
}

/* Masonry Grid ÑÑ‚Ğ¸Ğ»Ğ¸ */
.masonry-grid { }
.masonry-grid__container { }

.pin { }
.pin__image { }
.pin__overlay { }
.pin__controls { }
.pin__menu { }

.pin-modal { }
.pin-modal__content { }
.pin-modal__comments { }
```

#### 3. Placeholders (Ğ¡ĞºĞµĞ»ĞµÑ‚Ğ¾Ğ½Ñ‹)

```tsx
// components/PinSkeleton.tsx

export const PinSkeleton: React.FC<{ height: number }> = ({ height }) => {
  return (
    <div className="pin-skeleton" style={{ height: `${height}px` }}>
      <div className="skeleton-image" />
      <div className="skeleton-title" />
      <div className="skeleton-author" />
    </div>
  );
};
```

```css
/* styles/skeleton.css */

@keyframes shimmer {
  0% { background-position: -1000px 0; }
  100% { background-position: 1000px 0; }
}

.skeleton-image {
  background: linear-gradient(
    90deg,
    #f0f0f0 0%,
    #e0e0e0 20%,
    #f0f0f0 40%,
    #f0f0f0 100%
  );
  background-size: 1000px 100%;
  animation: shimmer 2s infinite;
}
```

**ĞŸÑĞ¸Ñ…Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ„Ñ„ĞµĞºÑ‚:** ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸ Ğ²Ğ¾ÑĞ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ÑÑ‚ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºÑƒ ĞºĞ°Ğº Ğ±Ğ¾Ğ»ĞµĞµ Ğ±Ñ‹ÑÑ‚Ñ€ÑƒÑ!

---

### C. ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ JavaScript

#### 1. Ğ”ĞµĞ»Ğ°Ğ¹ Ğ¼ĞµĞ½ÑŒÑˆĞµ! (Do Less Stuff)

```typescript
// âŒ ĞŸĞ»Ğ¾Ñ…Ğ¾: Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ°Ñ Ñ‚ÑĞ¶ĞµĞ»Ğ°Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°
const processImages = (images: Image[]) => {
  images.forEach(img => {
    // Ğ‘Ğ»Ğ¾ĞºĞ¸Ñ€ÑƒĞµÑ‚ UI!
    const processed = heavyImageProcessing(img);
    updateDOM(processed);
  });
};

// âœ… Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ¾: ĞÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ°Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°
const processImages = async (images: Image[]) => {
  for (const img of images) {
    // Ğ”Ğ°ĞµĞ¼ UI Ğ²Ñ€ĞµĞ¼Ñ Ğ½Ğ° Ñ€ĞµĞ½Ğ´ĞµÑ€
    await new Promise(resolve => requestIdleCallback(resolve));
    const processed = await processImageAsync(img);
    updateDOM(processed);
  }
};
```

#### 2. ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğ¹

```typescript
// hooks/useMasonryCalculations.ts

const calculationCache = new Map<string, PinPosition>();

export const useMasonryCalculations = () => {
  const calculatePosition = (
    pinId: number,
    height: number,
    columnHeights: number[]
  ): PinPosition => {
    const cacheKey = `${pinId}-${height}-${columnHeights.join(',')}`;
    
    // ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ ĞºÑÑˆ
    if (calculationCache.has(cacheKey)) {
      return calculationCache.get(cacheKey)!;
    }

    // Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ÑĞµĞ¼
    const position = doExpensiveCalculation(height, columnHeights);
    
    // ĞšÑÑˆĞ¸Ñ€ÑƒĞµĞ¼
    calculationCache.set(cacheKey, position);
    
    return position;
  };

  return { calculatePosition };
};
```

#### 3. Web Workers Ğ´Ğ»Ñ Ñ‚ÑĞ¶ĞµĞ»Ñ‹Ñ… Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğ¹

```typescript
// workers/imageProcessor.worker.ts

self.addEventListener('message', (e: MessageEvent) => {
  const { type, data } = e.data;

  if (type === 'CALCULATE_MASONRY_POSITIONS') {
    const positions = calculateMasonryPositions(data.pins, data.columnCount);
    self.postMessage({ type: 'POSITIONS_CALCULATED', positions });
  }
});

function calculateMasonryPositions(
  pins: Array<{ id: number; height: number }>,
  columnCount: number
): PinPosition[] {
  // Ğ¢ÑĞ¶ĞµĞ»Ñ‹Ğµ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ñ Ğ² Ñ„Ğ¾Ğ½Ğµ
  const columnHeights = new Array(columnCount).fill(0);
  const positions: PinPosition[] = [];

  pins.forEach(pin => {
    const shortestColumn = columnHeights.indexOf(Math.min(...columnHeights));
    positions.push({
      top: columnHeights[shortestColumn],
      left: shortestColumn * (PIN_WIDTH + GUTTER),
      column: shortestColumn
    });
    columnHeights[shortestColumn] += pin.height + GUTTER;
  });

  return positions;
}
```

```typescript
// hooks/useMasonryWorker.ts

export const useMasonryWorker = () => {
  const workerRef = useRef<Worker>();

  useEffect(() => {
    workerRef.current = new Worker(
      new URL('../workers/imageProcessor.worker.ts', import.meta.url)
    );

    return () => workerRef.current?.terminate();
  }, []);

  const calculatePositions = (pins: Pin[], columnCount: number) => {
    return new Promise<PinPosition[]>((resolve) => {
      const handleMessage = (e: MessageEvent) => {
        if (e.data.type === 'POSITIONS_CALCULATED') {
          workerRef.current?.removeEventListener('message', handleMessage);
          resolve(e.data.positions);
        }
      };

      workerRef.current?.addEventListener('message', handleMessage);
      workerRef.current?.postMessage({
        type: 'CALCULATE_MASONRY_POSITIONS',
        data: { pins, columnCount }
      });
    });
  };

  return { calculatePositions };
};
```

---

### D. PWA Ğ¸ Offline Ñ€ĞµĞ¶Ğ¸Ğ¼

```typescript
// service-worker.ts

import { precacheAndRoute } from 'workbox-precaching';
import { registerRoute } from 'workbox-routing';
import { CacheFirst, StaleWhileRevalidate } from 'workbox-strategies';
import { ExpirationPlugin } from 'workbox-expiration';

// ĞšÑÑˆ ÑÑ‚Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²
precacheAndRoute(self.__WB_MANIFEST);

// ĞšÑÑˆ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹ Ğ¿Ğ¸Ğ½Ğ¾Ğ² (Cache First)
registerRoute(
  ({ request }) => request.destination === 'image',
  new CacheFirst({
    cacheName: 'pinterest-images',
    plugins: [
      new ExpirationPlugin({
        maxEntries: 200,        // ĞœĞ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ 200 Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹
        maxAgeSeconds: 30 * 24 * 60 * 60, // 30 Ğ´Ğ½ĞµĞ¹
        purgeOnQuotaError: true // Ğ£Ğ´Ğ°Ğ»ÑÑ‚ÑŒ Ğ¿Ñ€Ğ¸ Ğ½ĞµÑ…Ğ²Ğ°Ñ‚ĞºĞµ Ğ¼ĞµÑÑ‚Ğ°
      })
    ]
  })
);

// ĞšÑÑˆ API Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (Stale While Revalidate)
registerRoute(
  ({ url }) => url.pathname.startsWith('/api/pins'),
  new StaleWhileRevalidate({
    cacheName: 'pinterest-api',
    plugins: [
      new ExpirationPlugin({
        maxEntries: 50,
        maxAgeSeconds: 5 * 60  // 5 Ğ¼Ğ¸Ğ½ÑƒÑ‚
      })
    ]
  })
);
```

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:**
- âœ… ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµĞ½Ğ½Ñ‹Ğµ Ğ¿Ğ¸Ğ½Ñ‹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹ offline
- âœ… Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° Ğ² ÑĞ°Ğ¼Ğ¾Ğ»ĞµÑ‚Ğµ
- âœ… ĞœĞ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ğ°Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° ĞºÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹

---

## 9. â™¿ Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾ÑÑ‚ÑŒ (Accessibility)

### A. ĞšĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ğ½Ğ°Ñ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ

```typescript
// hooks/useKeyboardShortcuts.ts

export const useKeyboardShortcuts = () => {
  useEffect(() => {
    const handleKeyPress = (e: KeyboardEvent) => {
      // J â€” ÑĞºÑ€Ğ¾Ğ»Ğ» Ğº ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ¼Ñƒ Ğ¿Ğ¸Ğ½Ñƒ
      if (e.key === 'j') {
        scrollToNextPin();
      }
      
      // K â€” ÑĞºÑ€Ğ¾Ğ»Ğ» Ğº Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰ĞµĞ¼Ñƒ Ğ¿Ğ¸Ğ½Ñƒ
      if (e.key === 'k') {
        scrollToPreviousPin();
      }
      
      // Home â€” Ğ½Ğ°Ğ²ĞµÑ€Ñ…
      if (e.key === 'Home') {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
      
      // End â€” Ğ²Ğ½Ğ¸Ğ·
      if (e.key === 'End') {
        window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
      }
      
      // L â€” Ğ»Ğ°Ğ¹Ğº Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾ Ğ¿Ğ¸Ğ½Ğ°
      if (e.key === 'l') {
        likeCurrentPin();
      }
      
      // S â€” Ğ¿Ğ¾Ğ´ĞµĞ»Ğ¸Ñ‚ÑŒÑÑ
      if (e.key === 's') {
        shareCurrentPin();
      }
      
      // ? â€” Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒ Ğ¿Ğ¾ hotkeys
      if (e.key === '?' && e.shiftKey) {
        showKeyboardHelp();
      }
    };

    window.addEventListener('keydown', handleKeyPress);
    return () => window.removeEventListener('keydown', handleKeyPress);
  }, []);
};
```

### B. Ğ¦Ğ²ĞµÑ‚Ğ¾Ğ²Ñ‹Ğµ ÑÑ…ĞµĞ¼Ñ‹

```css
/* ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ñ‚ĞµĞ¼Ğ½Ğ¾Ğ¹ Ñ‚ĞµĞ¼Ñ‹ */
@media (prefers-color-scheme: dark) {
  :root {
    --bg-primary: #000000;
    --bg-secondary: #1a1a1a;
    --text-primary: #ffffff;
    --text-secondary: #b0b0b0;
  }
}

/* Ğ’Ñ‹ÑĞ¾ĞºĞ°Ñ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ°ÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ */
@media (prefers-contrast: high) {
  .pin {
    border: 2px solid var(--text-primary);
  }
}

/* ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ñ†Ğ²ĞµÑ‚Ğ¾Ğ²Ğ¾Ğ¹ ÑĞ»ĞµĞ¿Ğ¾Ñ‚Ñ‹ */
.color-blind-mode {
  /* Ğ˜Ğ·Ğ±ĞµĞ³Ğ°ĞµĞ¼ ĞºÑ€Ğ°ÑĞ½Ğ¾-Ğ·ĞµĞ»ĞµĞ½Ñ‹Ñ… ĞºĞ¾Ğ¼Ğ±Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¹ */
  --success-color: #0066cc; /* Ğ¡Ğ¸Ğ½Ğ¸Ğ¹ Ğ²Ğ¼ĞµÑÑ‚Ğ¾ Ğ·ĞµĞ»ĞµĞ½Ğ¾Ğ³Ğ¾ */
  --error-color: #ff9900;   /* ĞÑ€Ğ°Ğ½Ğ¶ĞµĞ²Ñ‹Ğ¹ Ğ²Ğ¼ĞµÑÑ‚Ğ¾ ĞºÑ€Ğ°ÑĞ½Ğ¾Ğ³Ğ¾ */
}
```

### C. ARIA Ğ°Ñ‚Ñ€Ğ¸Ğ±ÑƒÑ‚Ñ‹ Ğ´Ğ»Ñ ÑĞºÑ€Ğ¸Ğ½Ñ€Ğ¸Ğ´ĞµÑ€Ğ¾Ğ²

```tsx
// components/AccessiblePin.tsx

export const AccessiblePin: React.FC<{ pin: Pin }> = ({ pin }) => {
  return (
    <article
      className="pin"
      role="article"
      aria-labelledby={`pin-title-${pin.id}`}
      aria-describedby={`pin-desc-${pin.id}`}
    >
      <img
        src={pin.imageUrl}
        alt={pin.title}
        role="img"
        aria-label={`Image: ${pin.title}`}
      />

      <div className="pin-info">
        <h3 id={`pin-title-${pin.id}`}>
          {pin.title}
        </h3>
        <p id={`pin-desc-${pin.id}`}>
          {pin.description}
        </p>
      </div>

      <div 
        className="pin-controls"
        role="group"
        aria-label="Pin actions"
      >
        <button
          aria-label={`Like pin. Currently ${pin.likesCount} likes`}
          aria-pressed={pin.isLiked}
        >
          â¤ï¸ {pin.likesCount}
        </button>

        <button
          aria-label="Share pin"
          aria-haspopup="menu"
        >
          Share
        </button>
      </div>

      {/* Live region Ğ´Ğ»Ñ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğ¹ */}
      <div
        role="status"
        aria-live="polite"
        aria-atomic="true"
        className="sr-only"
      >
        {/* Ğ”Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¾Ğ·Ğ²ÑƒÑ‡Ğ¸Ğ²Ğ°ÑÑ‚ÑÑ */}
      </div>
    </article>
  );
};
```

### D. REM Ğ²Ğ¼ĞµÑÑ‚Ğ¾ Pixels

```css
/* âŒ ĞŸĞ»Ğ¾Ñ…Ğ¾: Ğ¤Ğ¸ĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ğ¸ĞºÑĞµĞ»Ğ¸ */
.pin {
  font-size: 14px;
  padding: 16px;
}
/* ĞĞµ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¸ Ğ·ÑƒĞ¼Ğµ Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğ°! */

/* âœ… Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ¾: REM units */
:root {
  font-size: 16px; /* Base size */
}

.pin {
  font-size: 0.875rem;  /* 14px */
  padding: 1rem;        /* 16px */
}
/* ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¸ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¸ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞº Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğ°! */
```

**ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ ÑÑ‚Ğ¾ Ğ²Ğ°Ğ¶Ğ½Ğ¾:**
- ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸ Ñ Ğ¿Ğ»Ğ¾Ñ…Ğ¸Ğ¼ Ğ·Ñ€ĞµĞ½Ğ¸ĞµĞ¼ ÑƒĞ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ğ²Ğ°ÑÑ‚ Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€ ÑˆÑ€Ğ¸Ñ„Ñ‚Ğ°
- REM Ğ°Ğ´Ğ°Ğ¿Ñ‚Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ, pixels â€” Ğ½ĞµÑ‚
- Accessibility win!

---

## ğŸ“Š Ğ˜Ñ‚Ğ¾Ğ³Ğ¾Ğ²Ğ°Ñ Ğ´Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER BROWSER                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚   React UI   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”‚ Redux Store  â”‚            â”‚
â”‚  â”‚              â”‚         â”‚ (Normalized) â”‚            â”‚
â”‚  â”‚ - PinsGrid   â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚  â”‚ - Masonry    â”‚                â–²                     â”‚
â”‚  â”‚ - Pin Cards  â”‚                â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚                     â”‚
â”‚         â–²                        â”‚                     â”‚
â”‚         â”‚                        â”‚                     â”‚
â”‚         â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚         â”‚         â”‚   API Layer            â”‚          â”‚
â”‚         â”‚         â”‚   - getPins()          â”‚          â”‚
â”‚         â”‚         â”‚   - getComments()      â”‚          â”‚
â”‚         â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚         â”‚                        â–²                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚                     â”‚
â”‚  â”‚ Service Worker  â”‚            â”‚                     â”‚
â”‚  â”‚ - Image Cache   â”‚            â”‚                     â”‚
â”‚  â”‚ - API Cache     â”‚            â”‚                     â”‚
â”‚  â”‚ - Offline Mode  â”‚            â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚                     â”‚
â”‚         â–²                        â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                        â”‚
          â”‚                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         â”‚       CDN              â”‚      BACKEND        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Image         â”‚        â”‚ API Server     â”‚          â”‚
â”‚  â”‚ Optimization  â”‚        â”‚ - /pins        â”‚          â”‚
â”‚  â”‚ Service       â”‚        â”‚ - /comments    â”‚          â”‚
â”‚  â”‚               â”‚        â”‚                â”‚          â”‚
â”‚  â”‚ - Resize      â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚  â”‚ - WebP        â”‚                                    â”‚
â”‚  â”‚ - Cache       â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ²Ñ‹Ğ²Ğ¾Ğ´Ñ‹ (Key Takeaways)

### 1. **Masonry Layout â€” ÑĞµÑ€Ğ´Ñ†Ğµ Pinterest**
- ĞĞ±ÑĞ¾Ğ»ÑÑ‚Ğ½Ğ¾Ğµ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸
- `transform: translate3d()` Ğ²Ğ¼ĞµÑÑ‚Ğ¾ `top`/`left`
- Sliding Window Ğ´Ğ»Ñ Ğ²Ğ¸Ñ€Ñ‚ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸
- Intersection Observer Ğ´Ğ»Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸

### 2. **ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ°**
- 90% ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ° = Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ
- Image Optimization Service Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ĞµĞ½
- CDN ĞºÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
- Lazy loading
- WebP Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚

### 3. **ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ğ¿Ñ€ĞµĞ¶Ğ´Ğµ Ğ²ÑĞµĞ³Ğ¾**
- HTTP/2 Ğ´Ğ»Ñ Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ¾Ğ¹ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸
- Code splitting
- Web Workers Ğ´Ğ»Ñ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğ¹
- GPU acceleration (transform)
- Service Workers Ğ´Ğ»Ñ offline

### 4. **ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…**
- ĞĞ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ store (O(1) Ğ´Ğ¾ÑÑ‚ÑƒĞ¿)
- Ğ Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ ÑĞ»Ğ¾ĞµĞ² (UI â† Store â† API)
- Ğ­Ñ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğµ ĞºÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

### 5. **Accessibility matters**
- ĞšĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ğ½Ğ°Ñ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ
- ARIA Ğ°Ñ‚Ñ€Ğ¸Ğ±ÑƒÑ‚Ñ‹
- ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° ÑĞºÑ€Ğ¸Ğ½Ñ€Ğ¸Ğ´ĞµÑ€Ğ¾Ğ²
- REM Ğ²Ğ¼ĞµÑÑ‚Ğ¾ pixels
- Ğ¦Ğ²ĞµÑ‚Ğ¾Ğ²Ñ‹Ğµ ÑÑ…ĞµĞ¼Ñ‹

---

## ğŸ¯ ĞĞ° Ğ¸Ğ½Ñ‚ĞµÑ€Ğ²ÑŒÑ Ñ„Ğ¾ĞºÑƒÑĞ¸Ñ€ÑƒĞ¹Ñ‚ĞµÑÑŒ Ğ½Ğ°:

**Ğ•ÑĞ»Ğ¸ Ğ¿Ñ€Ğ¾ÑÑÑ‚ Ğ¿Ñ€Ğ¾ Layout:**
- Masonry Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼ (Ğ²Ñ‹Ğ±Ğ¾Ñ€ ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ¸, Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ)
- ĞĞ±ÑĞ¾Ğ»ÑÑ‚Ğ½Ğ¾Ğµ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
- Ğ’Ğ¸Ñ€Ñ‚ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ (Sliding Window)
- Intersection Observer

**Ğ•ÑĞ»Ğ¸ Ğ¿Ñ€Ğ¾ÑÑÑ‚ Ğ¿Ñ€Ğ¾ Performance:**
- Image optimization (ĞºĞ»ÑÑ‡ĞµĞ²Ğ¾Ğµ!)
- HTTP/2 Ğ¸ multiplexing
- Code splitting
- Lazy loading
- Service Workers

**Ğ•ÑĞ»Ğ¸ Ğ¿Ñ€Ğ¾ÑÑÑ‚ Ğ¿Ñ€Ğ¾ API:**
- ĞĞ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ store
- Pagination (cursor-based)
- ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
- Real-time Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ

**ĞŸĞ¾Ğ»Ğ½Ğ¾Ğµ Ğ¿Ñ€Ğ¾Ñ…Ğ¾Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ Ğ·Ğ°Ğ¹Ğ¼ĞµÑ‚ ~60 Ğ¼Ğ¸Ğ½ÑƒÑ‚**, Ğ½Ğ¾ Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ğ¾ Ğ¿Ñ€Ğ¾ÑÑÑ‚ ÑÑ„Ğ¾ĞºÑƒÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒÑÑ Ğ½Ğ° 1-2 Ğ°ÑĞ¿ĞµĞºÑ‚Ğ°Ñ…!

---

**Ğ’Ñ€ĞµĞ¼Ñ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ:** ~45-60 Ğ¼Ğ¸Ğ½ÑƒÑ‚ (full), 15-20 Ğ¼Ğ¸Ğ½ÑƒÑ‚ (focused)  
**Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ:** Middle/Senior Frontend Engineer  
**ĞšĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸:** Pinterest, Instagram, Tumblr, Behance

Ğ£Ğ´Ğ°Ñ‡Ğ¸ Ğ½Ğ° Ğ¸Ğ½Ñ‚ĞµÑ€Ğ²ÑŒÑ! ğŸš€